/*
  Project: ziko.js
  Author: Zakaria Elalaoui
  Date : 28/01/2024
  Git-Repo : https://github.com/zakarialaoui10/ziko.js
  Git-Wiki : https://github.com/zakarialaoui10/ziko.js/wiki
  Released under MIT License
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).Ziko={})}(this,(function(t){"use strict";class e{}class s extends e{constructor(t=0,e=0){super(),t instanceof s?(this.a=t.a,this.b=t.b):"object"==typeof t?"a"in e&&"b"in t?(this.a=t.a,this.b=t.b):"a"in e&&"z"in t?(this.a=t.a,this.b=f(t.z**2-t.a**2)):"a"in e&&"phi"in t?(this.a=t.a,this.b=t.a*k(t.phi)):"b"in e&&"z"in t?(this.b=t.b,this.a=f(t.z**2-t.b**2)):"b"in e&&"phi"in t?(this.b=e,this.a=t.b/k(t.phi)):"z"in e&&"phi"in t&&(this.a=t.z*w(t.phi),this.a=t.z*v(t.phi)):"number"==typeof t&&"number"==typeof e&&(this.a=+t.toFixed(32),this.b=+e.toFixed(32))}get clone(){return new s(this.a,this.b)}get z(){return q(this.a,this.b)}get phi(){return B(this.b,this.a)}static Zero(){return new s(0,0)}get conj(){return new s(this.a,-this.b)}get inv(){return new s(this.a/(g(this.a,2)+g(this.b,2)),-this.b/(g(this.a,2)+g(this.b,2)))}add(...t){for(let e=0;e<t.length;e++)"number"==typeof t[e]&&(t[e]=new s(t[e],0));let e=t.map((t=>t.a)),r=t.map((t=>t.b));return this.a+=+n(...e).toFixed(15),this.b+=+n(...r).toFixed(15),this}sub(...t){for(let e=0;e<t.length;e++)"number"==typeof t[e]&&(t[e]=new s(t[e],0));let e=t.map((t=>t.a)),r=t.map((t=>t.b));return this.a-=+n(...e).toFixed(15),this.b-=+n(...r).toFixed(15),this}mul(...t){for(let e=0;e<t.length;e++)"number"==typeof t[e]&&(t[e]=new s(t[e],0));let e=+i(this.z,...t.map((t=>t.z))).toFixed(15),r=+n(this.phi,...t.map((t=>t.phi))).toFixed(15);return this.a=+(e*w(r).toFixed(15)).toFixed(14),this.b=+(e*v(r).toFixed(15)).toFixed(14),this}div(...t){for(let e=0;e<t.length;e++)"number"==typeof t[e]&&(t[e]=new s(t[e],0));let e=+(this.z/i(...t.map((t=>t.z)))).toFixed(15),r=+(this.phi-n(...t.map((t=>t.phi)))).toFixed(15);return this.a=+(e*w(r).toFixed(15)).toFixed(15),this.b=+(e*v(r).toFixed(15)).toFixed(15),this}pow(t){if(N(t)===t&&t>0){let e=+(this.z**t).toFixed(15),s=+(this.phi*t).toFixed(15);this.a=+(e*w(s).toFixed(15)).toFixed(15),this.b=+(e*v(s).toFixed(15)).toFixed(15)}return this}static fromExpo(t,e){return new s(+(t*w(e)).toFixed(13),+(t*v(e)).toFixed(13))}get expo(){return[this.z,this.phi]}static add(t,...e){return t.clone.add(...e)}static sub(t,...e){return t.clone.sub(...e)}static mul(t,...e){return t.clone.mul(...e)}static div(t,...e){return t.clone.div(...e)}static pow(t,e){return t.clone.pow(e)}static xpowZ(t){return r(t**this.a*w(this.b*x(t)),t**this.a*v(this.b*x(t)))}sqrtn(t=2){return r(b(this.z,t)*w(this.phi/t),b(this.z,t)*v(this.phi/t))}get sqrt(){return this.sqrtn(2)}get log(){return r(this.z,this.phi)}get cos(){return r(w(this.a)*S(this.b),v(this.a)*V(this.b))}get sin(){return r(v(this.a)*S(this.b),w(this.a)*V(this.b))}get tan(){const t=w(2*this.a)+S(2*this.b);return r(v(2*this.a)/t,V(2*this.b)/t)}printInConsole(){let t=this.a+" + "+this.b+" * i";return console.log(t),t}print(){}UI(){return"<span>"+this.a+" + i * "+this.b+"</span>"}}const r=(t,e)=>{if((t instanceof Array||ArrayBuffer.isView(t))&&(e instanceof Array||ArrayBuffer.isView(t)))return t.map(((s,n)=>r(t[n],e[n])));if(t instanceof at&&e instanceof at){if(t.shape[0]!==e.shape[0]||t.shape[1]!==e.shape[1])return Error(0);const s=t.arr.map(((s,n)=>r(t.arr[n],e.arr[n])));return new at(t.rows,t.cols,...s)}return new s(t,e)},n=(...t)=>{if(t.every((t=>"number"==typeof t))){let e=t[0];for(let s=1;s<t.length;s++)e+=t[s];return e}const e=[];for(let s=0;s<t.length;s++)t[s]instanceof Array?e.push(n(...t[s])):t[s]instanceof Object&&e.push(n(...Object.values(t[s])));return 1===e.length?e[0]:e},i=(...t)=>{if(t.every((t=>"number"==typeof t))){let e=t[0];for(let s=1;s<t.length;s++)e*=t[s];return e}const e=[];for(let s=0;s<t.length;s++)t[s]instanceof Array?e.push(i(...t[s])):t[s]instanceof Object&&e.push(i(...Object.values(t[s])));return 1===e.length?e[0]:e},a=(...t)=>{if(t.every((t=>"number"==typeof t)))return Math.min(...t);const e=[];for(let s=0;s<t.length;s++)t[s]instanceof Array?e.push(a(...t[s])):t[s]instanceof Object&&e.push(Object.fromEntries([Object.entries(t[s]).sort(((t,e)=>t[1]-e[1]))[0]]));return 1===e.length?e[0]:e},o=(...t)=>{if(t.every((t=>"number"==typeof t)))return Math.max(...t);const e=[];for(let s=0;s<t.length;s++)t[s]instanceof Array?e.push(a(...t[s])):t[s]instanceof Object&&e.push(Object.fromEntries([Object.entries(t[s]).sort(((t,e)=>e[1]-t[1]))[0]]));return 1===e.length?e[0]:e},h=(...t)=>{if(t.every((t=>"number"==typeof t))){let e=t.reduce(((t,e)=>[...t,t[t.length-1]+e]),[0]);return e.shift(),e}const e=[];for(let s=0;s<t.length;s++)t[s]instanceof Array?e.push(h(...t[s])):t[s]instanceof Object&&e.push(null);return 1===e.length?e[0]:e},l=t=>{const e=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7];if(t<.5)return+(Math.PI/(Math.sin(Math.PI*t)*l(1-t))).toFixed(10);t-=1;let s=e[0];for(let r=1;r<9;r++)s+=e[r]/(t+r);const r=t+7+.5;return+(Math.sqrt(2*Math.PI)*Math.pow(r,t+.5)*Math.exp(-r)*s).toFixed(10)},u=(t,e)=>{let s=0;for(let r=0;r<100;r++){s+=Math.pow(-1,r)*Math.pow(e/2,t+2*r)/(U(r)*U(t+r))}return s},m=(t,e)=>{let s=0;const r=s=>Math.pow(s,t-1)*Math.pow(1-s,e-1);s+=.5*(r(0)+r(1));for(let t=1;t<1e3;t++){s+=r(0+.001*t)}return.001*s},p={cos:t=>+Math.cos(t).toFixed(15),sin:t=>+Math.sin(t).toFixed(15),tan:t=>+Math.tan(t).toFixed(31),sinc:t=>+Math.sin(Math.PI*t)/(Math.PI*t),sec:t=>1/Math.cos(t).toFixed(15),csc:t=>1/Math.sin(t).toFixed(15),cot:t=>1/Math.tan(t).toFixed(15),acos:t=>+Math.acos(t).toFixed(15),asin:t=>+Math.asin(t).toFixed(15),atan:t=>+Math.atan(t).toFixed(15),acot:t=>+Math.PI/2-Math.atan(t).toFixed(15),cosh:t=>+Math.cosh(t).toFixed(15),sinh:t=>+Math.sinh(t).toFixed(15),tanh:t=>+Math.tanh(t).toFixed(15),coth:t=>+(.5*Math.log((1+t)/(1-t))).toFixed(15),acosh:t=>+Math.acosh(t).toFixed(15),asinh:t=>+Math.asinh(t).toFixed(15),atanh:t=>+Math.atanh(t).toFixed(15)},d=(...t)=>mt(Math.abs,...t),f=(...t)=>mt(Math.sqrt,...t),g=(t,e)=>{if("number"==typeof t)return"number"==typeof e?Math.pow(t,e):e instanceof s?s.fromExpo(t**e.a,e.b*x(t)):mt((e=>g(t,e)),...e);if(t instanceof s)return"number"==typeof e?s.fromExpo(t.z**e,t.phi*e):e instanceof s?s.fromExpo(t.z**e.a*y(-t.phi*e.b),x(t.z)*e.b+e.a*t.phi):mt((e=>g(t,e)),...e);if(t instanceof Array){if("number"==typeof e)return mt((t=>g(t,e)),...t);if(e instanceof Array){const s=[];for(let r=0;r<t.length;r++)s.push(mt((e=>g(t[r],e)),...e));return s}}},b=(t,e)=>{if("number"==typeof t)return"number"==typeof e?Math.pow(t,1/e):mt((e=>b(t,e)),...e);if(t instanceof s)return"number"==typeof e?s.fromExpo(b(t.z,e),t.phi/e):mt((e=>b(t,e)),...e);if(t instanceof Array){if("number"==typeof e)return mt((t=>b(t,e)),...t);if(e instanceof Array){const s=[];for(let r=0;r<t.length;r++)s.push(mt((e=>b(t[r],e)),...e));return s}}},y=(...t)=>mt(Math.exp,...t),x=(...t)=>mt(Math.log,...t),w=(...t)=>mt(p.cos,...t),v=(...t)=>mt(p.sin,...t),k=(...t)=>mt(p.tan,...t),E=(...t)=>mt(p.sec,...t),A=(...t)=>mt(p.sinc,...t),M=(...t)=>mt(p.csc,...t),C=(...t)=>mt(p.cot,...t),T=(...t)=>mt(p.acos,...t),_=(...t)=>mt(p.asin,...t),I=(...t)=>mt(p.atan,...t),O=(...t)=>mt(p.acot,...t),S=(...t)=>mt(p.cosh,...t),V=(...t)=>mt(p.sinh,...t),j=(...t)=>mt(p.tanh,...t),D=(...t)=>mt(p.coth,...t),R=(...t)=>mt(p.acosh,...t),P=(...t)=>mt(p.asinh,...t),F=(...t)=>mt(p.atanh,...t),L=(...t)=>mt(Math.ceil,...t),N=(...t)=>mt(Math.floor,...t),z=(...t)=>mt(Math.round,...t),B=(t,e,s=!0)=>{if("number"==typeof t)return"number"==typeof e?s?Math.atan2(t,e):180*Math.atan2(t,e)/Math.PI:mt((e=>B(t,e,s)),...e);if(t instanceof Array){if("number"==typeof e)return mt((t=>B(t,e,s)),...t);if(e instanceof Array){const s=[];for(let r=0;r<t.length;r++)s.push(mt((e=>g(t[r],e)),...e));return s}}},U=(...t)=>mt((t=>{let e,s=1;if(0==t)s=1;else if(t>0)for(e=1;e<=t;e++)s*=e;else s=NaN;return s}),...t),$=(...t)=>mt(Math.sign,...t),H=(...t)=>mt((t=>1/(1+y(-t))),...t),q=(...t)=>t.every((t=>"number"==typeof t))?Math.hypot(...t):t.every((t=>t instanceof Array))?mt(Math.hypot,...t):void 0,W={_mode:Number,_map:function(t,e,r){return e instanceof at?new at(e.rows,e.cols,e.arr.flat(1).map((e=>t(e,r)))):e instanceof s?new s(t(e.a,r),t(e.b,r)):e instanceof Array?e.map((e=>t(e,r))):void 0},not:function(t){return["number","boolean"].includes(typeof t)?W._mode(!t):this._map(this.not,t)},and:function(t,...e){return["number","boolean"].includes(typeof t)?W._mode(e.reduce(((t,e)=>t&e),t)):this._map(this.and,t,e)},or:function(t,...e){return["number","boolean"].includes(typeof t)?W._mode(e.reduce(((t,e)=>t|e),t)):this._map(this.or,t,e)},nand:function(t,...e){return this.not(this.and(t,e))},nor:function(t,...e){return this.not(this.or(t,e))},xor:function(t,...e){let s=[t,...e];return["number","boolean"].includes(typeof t)?this._mode(1===s.reduce(((t,e)=>(1==+e&&(t+=1),t)),0)):this._map(this.xor,t,e)},xnor:function(t,...e){return W.not(W.xor(t,e))}};var X={_mode:Number,_map:function(t,e,r){return e instanceof at?new at(e.rows,e.cols,e.arr.flat(1).map((e=>t(e,r)))):e instanceof s?new s(t(e.a,r),t(e.b,r)):e instanceof Array?e.map((e=>t(e,r))):void 0},dec2base(t,e){return this._mode=e<=10?Number:String,"number"==typeof t?this._mode((t>>>0).toString(e)):this._map(this.dec2base,t,e)},dec2bin(t){return this.dec2base(t,2)},dec2oct(t){return this.dec2base(t,8)},dec2hex(t){return this.dec2base(t,16)},bin2base(t,e){return this.dec2base(this.bin2dec(t),e)},bin2dec(t){return this._mode("0b"+t)},bin2oct(t){return this.bin2base(t,8)},bin2hex(t){return this.bin2base(t,16)},oct2dec(t){return this._mode("0o"+t)},oct2bin(t){return this.dec2bin(this.oct2dec(t))},oct2hex(t){return this.dec2hex(this.oct2dec(t))},oct2base(t,e){return this.dec2base(this.oct2dec(t),e)},hex2dec(t){return this._mode("0x"+t)},hex2bin(t){return this.dec2bin(this.hex2dec(t))},hex2oct(t){return this.dec2oct(this.hex2dec(t))},hex2base(t,e){return this.dec2base(this.hex2dec(t),e)},IEEE32toDec(t){let e=t.split(" ").join("").padEnd(32,"0"),s=e[0],r=2**(+("0b"+e.slice(1,9))-127);return(-1)**s*(1+e.slice(9,32).split("").map((t=>+t)).map(((t,e)=>t*2**(-e-1))).reduce(((t,e)=>t+e),0))*r},IEEE64toDec(t){let e=t.split(" ").join("").padEnd(64,"0"),s=e[0],r=2**(+("0b"+e.slice(1,12))-1023);return(-1)**s*(1+e.slice(13,64).split("").map((t=>+t)).map(((t,e)=>t*2**(-e-1))).reduce(((t,e)=>t+e),0))*r}};class Y{static withDiscount(t,e=t.length){if(1===e)return t.map((t=>[t]));const s=[];let r;return r=this.withDiscount(t,e-1),t.forEach((t=>{r.forEach((e=>{s.push([t].concat(e))}))})),s}static withoutDiscount(t){if(1===t.length)return t.map((t=>[t]));const e=[],s=this.withoutDiscount(t.slice(1)),r=t[0];for(let t=0;t<s.length;t++){const n=s[t];for(let t=0;t<=n.length;t++){const s=n.slice(0,t),i=n.slice(t);e.push(s.concat([r],i))}}return e}}class Z{static withDiscount(t,e){if(1===e)return t.map((t=>[t]));const s=[];return t.forEach(((r,n)=>{this.withDiscount(t.slice(n),e-1).forEach((t=>{s.push([r].concat(t))}))})),s}static withoutDiscount(t,e){if(1===e)return t.map((t=>[t]));const s=[];return t.forEach(((r,n)=>{this.withoutDiscount(t.slice(n+1),e-1).forEach((t=>{s.push([r].concat(t))}))})),s}}function G(t){const e=[],s=2**t.length;for(let r=0;r<s;r+=1){const s=[];for(let e=0;e<t.length;e+=1)r&1<<e&&s.push(t[e]);e.push(s)}return e}var Q=(...t)=>{let e=jt(0,2**t.length,1).toBin.map((e=>e.padStart(t.length,0))).map((t=>t.split("").map((t=>+t)))),s=e.map((e=>e.map(((e,s)=>t[s]))));for(let t=0;t<s.length;t++)for(let r=0;r<s[t].length;r++)s[t][r]={n:s[t][r],m:e[t][r]};return s=s.map((t=>t.filter((t=>1==t.m)))),s=s.map((t=>t.map((t=>t.n)))),s},K={Logic:W,Base:X,Permutation:Y,Combinaison:Z,PowerSet:G,subset:Q};class J{static float(t=1,e){return e?Math.random()*(e-t)+t:t*Math.random()}static int(t,e){return Math.floor(this.float(t,e))}static char(t){t=t??this.bool();const e=String.fromCharCode(this.int(97,120));return t?e.toUpperCase():e}static bool(){return[!1,!0][Math.floor(2*Math.random())]}static string(t,e){return t instanceof Array?new Array(this.int(...t)).fill(0).map((()=>this.char(e))).join(""):new Array(t).fill(0).map((()=>this.char(e))).join("")}static bin(){return this.int(2)}static oct(){return this.int(8)}static dec(){return this.int(8)}static hex(){return this.int(16)}static choice(t=[1,2,3],e=new Array(t.length).fill(1/t.length)){let s=new Array(100);e=Ht.accum(...e).map((t=>100*t)),s.fill(t[0],0,e[0]);for(let r=1;r<t.length;r++)s.fill(t[r],e[r-1],e[r]);return s[this.int(s.length-1)]}static shuffleArr(t){return t.sort((()=>.5-Math.random()))}static shuffleMatrix(t){const{rows:e,cols:s,arr:r}=t;return ot(e,s,r.flat().sort((()=>.5-Math.random())))}static floats(t,e,s){return new Array(t).fill(0).map((()=>this.float(e,s)))}static ints(t,e,s){return new Array(t).fill(0).map((()=>this.int(e,s)))}static bools(t){return new Array(t).fill(0).map((()=>this.bool()))}static bins(t){return new Array(t).fill(0).map((()=>this.int(2)))}static octs(t){return new Array(t).fill(0).map((()=>this.int(8)))}static decs(t){return new Array(t).fill(0).map((()=>this.int(10)))}static hexs(t){return new Array(t).fill(0).map((()=>this.int(16)))}static choices(t,e,s){return new Array(t).fill(0).map((()=>this.choice(e,s)))}static perm(...t){return t.permS[this.int(t.length)]}static color(){return"#"+X.dec2hex(this.float(16777216)).padStart(6,0)}static colors(t){return new Array(t).fill(null).map((()=>this.color()))}static complex(t=[0,1],e=[0,1]){return t instanceof Array?new s(this.float(t[0],t[1]),this.float(e[0],e[1])):new s(...this.floats(2,t,e))}static complexInt(t=[0,1],e=[0,1]){return new s(this.int(t[0],t[1]),this.int(e[0],e[1]))}static complexBin(){return new s(...this.bins(2))}static complexOct(){return new s(...this.octs(2))}static complexDec(){return new s(...this.decs(10))}static complexHex(){return new s(...this.octs(2))}static complexes(t,e=0,s=1){return new Array(t).fill(0).map((()=>this.complex(e,s)))}static complexesInt(t,e=0,s=1){return new Array(t).fill(0).map((()=>this.complexInt(e,s)))}static complexesBin(t){return new Array(t).fill(0).map((()=>this.complexBin()))}static complexesOct(t){return new Array(t).fill(0).map((()=>this.complexOct()))}static complexesDec(t){return new Array(t).fill(0).map((()=>this.complexDec()))}static complexesHex(t){return new Array(t).fill(0).map((()=>this.complexHex()))}static matrix(t,e,s,r){return ot(t,e,this.floats(t*e,s,r))}static matrixInt(t,e,s,r){return ot(t,e,this.ints(t*e,s,r))}static matrixBin(t,e){return ot(t,e,this.bins(t*e))}static matrixOct(t,e){return ot(t,e,this.octs(t*e))}static matrixDec(t,e){return ot(t,e,this.decs(t*e))}static matrixHex(t,e){return ot(t,e,this.hex(t*e))}static matrixColor(t,e){return ot(t,e,this.colors(t*e))}static matrixComplex(t,e,s,r){return ot(t,e,this.complexes(t*e,s,r))}static matrixComplexInt(t,e,s,r){return ot(t,e,this.complexesInt(t*e,s,r))}static matrixComplexBin(t,e){return ot(t,e,this.complexesBin(t*e))}static matrixComplexOct(t,e){return ot(t,e,this.complexesBin(t*e))}static matrixComplexDec(t,e){return ot(t,e,this.complexesBin(t*e))}static matrixComplexHex(t,e){return ot(t,e,this.complexesBin(t*e))}}const tt=t=>{t instanceof at&&(t=t.arr);const e=t.length,s=new Array(e).fill(0).map((()=>new Array(e).fill(0))),r=new Array(e).fill(0).map((()=>new Array(e).fill(0)));for(let n=0;n<e;n++){for(let i=n;i<e;i++){let e=0;for(let t=0;t<n;t++)e+=s[n][t]*r[t][i];r[n][i]=t[n][i]-e}for(let i=n;i<e;i++)if(n==i)s[n][n]=1;else{let e=0;for(let t=0;t<n;t++)e+=s[i][t]*r[t][n];s[i][n]=(t[i][n]-e)/r[n][n]}}return[s,r].map((t=>new at(t)))},et=(t,e)=>t.reduce(((t,s,r)=>t+s*e[r]),0),st=t=>Math.sqrt(t.reduce(((t,e)=>t+e*e),0)),rt=t=>t.map((e=>e/st(t))),nt=t=>{t instanceof at&&(t=t.arr);const e=t.length,s=t[0].length,r=[],n=[];for(let t=0;t<e;t++)n.push(new Array(s).fill(0));for(let i=0;i<s;i++){let s=t.map((t=>t[i]));for(let a=0;a<i;a++){const o=r[a],h=et(o,t.map((t=>t[i])));for(let t=0;t<e;t++)s[t]-=h*o[t];n[a][i]=h}const a=st(s);r.push(rt(s)),n[i][i]=a}return[r,n].map((t=>new at(t)))},it=t=>{t instanceof at&&(t=t.arr);const e=t.length,s=new Array(e).fill(0).map((()=>new Array(e).fill(0)));for(let r=0;r<e;r++)for(let e=0;e<=r;e++){let n=0;for(let t=0;t<e;t++)n+=s[r][t]*s[e][t];s[r][e]=r===e?Math.sqrt(t[r][r]-n):1/s[e][e]*(t[r][e]-n)}return new at(s)};class at extends e{constructor(t,e,s=[]){if(super(),t instanceof at)this.arr=t.arr,this.rows=t.rows,this.cols=t.cols;else{let r,n,i=[];if(arguments[0]instanceof Array)t=arguments[0].length,e=arguments[0][0].length,i=arguments[0];else for(r=0;r<t;r++)for(i.push([]),i[r].push(new Array(e)),n=0;n<e;n++)i[r][n]=s[r*e+n],null==s[r*e+n]&&(i[r][n]=0);this.rows=t,this.cols=e,this.arr=i}this._maintain()}at(t=0,e=void 0){return t<0&&(t=this.rows+t),null==e?this.arr[t]:(e<0&&(e=this.cols+e),this.arr[t][e])}reshape(t,e){if(t*e==this.rows*this.cols)return new at(t,e,this.arr.flat(1));console.error("Err")}static eye(t){let e=new at(t,t);for(let s=0;s<t;s++)for(let r=0;r<t;r++)e.arr[s][r]=s===r?1:0;return e}get clone(){return new at(this.rows,this.cols,this.arr.flat(1))}get size(){return this.rows*this.cols}get shape(){return[this.rows,this.cols]}get reel(){return new at(this.cols,this.rows,this.arr.flat(1).reel)}get imag(){return new at(this.cols,this.rows,this.arr.flat(1).imag)}_maintain(){for(let t=0;t<this.arr.length;t++)Object.assign(this,{[[t]]:this.arr[t]});return this}get(t=0,e=0){return-1==e?this.arr[t]:-1==t?this.arr.map((t=>t[e])):this.arr[t][e]}set(t=0,e=0,s){if(-1==e)return this.arr[t]=s;if(-1==t){for(let t=0;t<this.cols;t++)this.arr[t][e]=s[t]||0;return this.arr}return this.arr[t][e]=s}get isSquare(){return this.rows/this.cols==1}get isSym(){if(!this.isSquare)return!1;const t=this.T,e=this.clone;return 0==at.sub(e,t).max&&0==at.sub(e,t).min}get isAntiSym(){if(!this.isSquare)return!1;const t=this.T,e=this.clone;return 0==at.add(e,t).max&&0==at.add(e,t).min}get isDiag(){if(!this.isSquare)return!1;const t=this.T,e=this.clone,s=at.mul(e,t),r=at.dot(t,e);return 0==at.sub(s,r).max&&0==at.sub(s,r).min}get isOrtho(){return!!this.isSquare&&(this.isDiag&&(1==this.det||-1==this.det))}get isIdemp(){if(!this.isSquare)return!1;const t=this.clone,e=at.dot(t,t);return 0==at.sub(e,t).max&&0==at.sub(e,t).min}get T(){let t=[];for(let e=0;e<this.arr[0].length;e++){t[e]=[];for(let s=0;s<this.arr.length;s++)t[e][s]=this.arr[s][e]}return new at(this.cols,this.rows,t.flat(1))}get det(){if(!this.isSquare)return new Error("is not square matrix");if(1==this.rows)return this.arr[0][0];function t(t,e){var s=[];for(let e=0;e<t.length;e++)s.push(t[e].slice(0));s.splice(0,1);for(let t=0;t<s.length;t++)s[t].splice(e,1);return s}return function e(s){if(2==s.length)return s.flat(1).some((t=>t instanceof at))?void console.warn("Tensors are not completely supported yet ..."):Ht.sub(Ht.mul(s[0][0],s[1][1]),Ht.mul(s[0][1],s[1][0]));for(var r=0,n=0;n<s.length;n++){const i=Ht.add(Ht.mul(g(-1,n),Ht.mul(s[0][n],e(t(s,n)))));r=Ht.add(r,i)}return r}(this.arr)}get inv(){if(!this.isSquare)return new Error("is not square matrix");if(0===this.det)return"determinat = 0 !!!";let t=function(t){if(t.length!==t[0].length)return;var e=0,s=0,r=0,n=t.length,i=0,a=[],o=[];for(e=0;e<n;e+=1)for(a[a.length]=[],o[o.length]=[],r=0;r<n;r+=1)a[e][r]=e==r?1:0,o[e][r]=t[e][r];for(e=0;e<n;e+=1){if(0==(i=o[e][e])){for(s=e+1;s<n;s+=1)if(0!=o[s][e]){for(r=0;r<n;r++)i=o[e][r],o[e][r]=o[s][r],o[s][r]=i,i=a[e][r],a[e][r]=a[s][r],a[s][r]=i;break}if(0==(i=o[e][e]))return}for(r=0;r<n;r++)o[e][r]=o[e][r]/i,a[e][r]=a[e][r]/i;for(s=0;s<n;s++)if(s!=e)for(i=o[s][e],r=0;r<n;r++)o[s][r]-=i*o[e][r],a[s][r]-=i*a[e][r]}return a}(this.arr);return new at(this.rows,this.cols,t.flat(1))}static zeros(t,e){let s=new at(t,e);for(let n=0;n<t;n++)for(var r=0;r<e;r++)s.arr[n][r]=0;return s}static ones(t,e){let s=new at(t,e);for(let r=0;r<t;r++)for(let t=0;t<e;t++)s.arr[r][t]=1;return s}static nums(t,e,s){let r=new at(t,e);for(let n=0;n<t;n++)for(let t=0;t<e;t++)r.arr[n][t]=s;return r}static get rand(){return{int:(t,e,s,r)=>{let n=new at(t,e);for(let i=0;i<t;i++)for(let t=0;t<e;t++)n.arr[i][t]=J.randInt(s,r);return n},bin:(t,e)=>{let s=new at(t,e);for(let r=0;r<t;r++)for(let t=0;t<e;t++)s.arr[r][t]=J.randBin;return s},hex:(t,e)=>{let s=new at(t,e);for(let r=0;r<t;r++)for(let t=0;t<e;t++)s.arr[r][t]=J.randHex;return s},choices:(t,e,s,r)=>{let n=new at(t,e);for(let i=0;i<t;i++)for(let t=0;t<e;t++)n.arr[i][t]=J.choice(s,r);return n},permutation:(t,e,s)=>{}}}static rands(t,e,s=1,r){let n=new at(t,e);for(let i=0;i<t;i++)for(let t=0;t<e;t++)n.arr[i][t]=J.rand(s,r);return n}map(t,e,s,r){return Ht.map(this,t,e,s,r)}lerp(t,e){return Ht.lerp(this,t,e)}norm(t,e){return Ht.norm(this,t,e)}clamp(t,e){return Ht.clamp(this,t,e)}static map(t,e,s,r,n){return Ht.map(t,e,s,r,n)}static lerp(t,e,s){return Ht.lerp(t,e,s)}static norm(t,e,s){return Ht.norm(t,e,s)}static clamp(t,e,s){return Ht.clamp(ot,e,s)}toPrecision(t){for(let e=0;e<this.cols;e++)for(let s=0;s<this.rows;s++)this.arr[e][s]=+this.arr[e][s].toPrecision(t);return this}get toBin(){let t=this.arr.flat(1).toBin;return new at(this.rows,this.cols,t)}get toOct(){let t=this.arr.flat(1).toOct;return new at(this.rows,this.cols,t)}get toHex(){let t=this.arr.flat(1).toHex;return new at(this.rows,this.cols,t)}max2min(){let t=this.arr.flat(1).max2min;return new at(this.rows,this.cols,t)}min2max(){let t=this.arr.flat(1).min2max;return new at(this.rows,this.cols,t)}sortRows(t=void 0){let e=this.arr.map((e=>e.sort(t))).flat(1);return new at(this.rows,this.cols,e)}sortCols(t=void 0){let e=this.T.arr.map((e=>e.sort(t))).flat(1);return new at(this.rows,this.cols,e).T}filterByRows(t){var e=this.arr.map((e=>e.map((e=>+(""+e).includes(t))))).map((t=>!!Logic.or(...t))),s=this.arr.filter(((t,s)=>!0===e[s]));return 0===s.length&&s.push([]),console.log(s),new at(s)}filterByCols(t){return new at(this.T.arr.filter((e=>e.includes(t))))}sortAll(t=void 0){let e=this.arr.flat(1).sort(t);return new at(this.rows,this.cols,e)}count(t){return this.arr.flat(1).count(t)}toBase(t){let e=this.arr.flat(1).toBase(t);return new at(this.rows,this.cols,e)}#t(t){if(this.rows!==t.rows)return;let e=this.arr;for(let s=0;s<this.rows;s++)for(let r=this.cols;r<this.cols+t.cols;r++)e[s][r]=t.arr[s][r-this.cols];return this.cols+=t.cols,new at(this.rows,this.cols,e.flat(1))}hstack(...t){const e=[this,...t].reduce(((t,e)=>t.#t(e)));return Object.assign(this,e),this}static hstack(t,...e){return t.clone.hstack(...e)}#e(t){if(this.cols!==t.cols)return;let e=this.arr;for(let s=this.rows;s<this.rows+t.rows;s++){e[s]=[];for(let r=0;r<this.cols;r++)e[s][r]=t.arr[s-this.rows][r]}return this.rows+=t.rows,new at(this.rows,this.cols,e.flat(1))}vstack(...t){const e=[this,...t].reduce(((t,e)=>t.#e(e)));return Object.assign(this,e),this}static vstack(t,...e){return t.clone.vstack(...e)}hqueue(...t){const e=[this,...t].reverse().reduce(((t,e)=>t.#t(e)));return Object.assign(this,e),this}vqueue(...t){const e=[this,...t].reverse().reduce(((t,e)=>t.#e(e)));return Object.assign(this,e),this}static hqueue(t,...e){return t.clone.hqueue(...e)}static vqueue(t,...e){return t.clone.vqueue(...e)}slice(t=0,e=0,s=this.rows-1,r=this.cols-1){let n=s-t,i=r-e,a=new Array(i);for(let s=0;s<n;s++){a[s]=[];for(let r=0;r<i;r++)a[s][r]=this.arr[s+t][r+e]}return new at(n,i,a.flat(1))}static slice(t,e=0,s=0,r=this.rows-1,n=this.cols-1){return t.slice(e,s,r,n)}splice(t,e,s,...r){}getRows(t,e=t+1){return this.slice(t,0,e,this.cols)}getCols(t,e=t+1){return this.slice(0,t,this.rows,e)}static getRows(t,e,s=e+1){return t.slice(e,0,s,t.cols)}static getCols(t,e,s=e+1){return t.slice(0,e,t.rows,s)}add(...t){for(let r=0;r<t.length;r++){("number"==typeof t[r]||t[r]instanceof s)&&(t[r]=at.nums(this.rows,this.cols,t[r]));for(let s=0;s<this.rows;s++)for(var e=0;e<this.cols;e++)this.arr[s][e]=Ht.add(this.arr[s][e],t[r].arr[s][e])}return new at(this.rows,this.cols,this.arr.flat(1))}sub(...t){for(let s=0;s<t.length;s++){"number"==typeof t[s]&&(t[s]=at.nums(this.rows,this.cols,t[s]));for(let r=0;r<this.rows;r++)for(var e=0;e<this.cols;e++)this.arr[r][e]=Ht.sub(this.arr[r][e],t[s].arr[r][e])}return new at(this.rows,this.cols,this.arr.flat(1))}static add(t,...e){return t.clone.add(...e)}static sub(t,...e){return t.clone.sub(...e)}mul(...t){for(let r=0;r<t.length;r++){"number"==typeof t[r]&&(t[r]=at.nums(this.rows,this.cols,t[r]));for(var e=0;e<this.rows;e++)for(var s=0;s<this.cols;s++)this.arr[e][s]=Ht.mul(this.arr[e][s],t[r].arr[e][s])}return new at(this.rows,this.cols,this.arr.flat(1))}div(...t){for(let s=0;s<t.length;s++){"number"==typeof t[s]&&(t[s]=at.nums(this.rows,this.cols,t[s]));for(let r=0;r<this.rows;r++)for(var e=0;e<this.cols;e++)this.arr[r][e]=Ht.div(this.arr[r][e],t[s].arr[r][e])}return new at(this.rows,this.cols,this.arr.flat(1))}static div(t,...e){return t.clone.div(...e)}static mul(t,...e){return t.clone.mul(...e)}modulo(...t){for(let s=0;s<t.length;s++){"number"==typeof t[s]&&(t[s]=at.nums(this.rows,this.cols,t[s]));for(let r=0;r<this.rows;r++)for(var e=0;e<this.cols;e++)this.arr[r][e]=Ht.modulo(this.arr[r][e],t[s].arr[r][e])}return new at(this.rows,this.cols,this.arr.flat(1))}static modulo(t,...e){return t.clone.modulo(...e)}dot(t){for(var e=[],s=0;s<this.arr.length;s++){e[s]=[];for(var r=0;r<t.arr[0].length;r++){e[s][r]=0;for(var n=0;n<this.arr[0].length;n++)e[s][r]=Ht.add(e[s][r],Ht.mul(this.arr[s][n],t.arr[n][r]))}}return new at(this.arr.length,t.arr[0].length,e.flat(1))}static dot(t,e){return t.dot(e)}pow(t){let e=this.clone,s=this.clone;for(let r=0;r<t-1;r++)s=s.dot(e);return s}static pow(t,e){return t.clone.pow(e)}get somme(){let t=0;for(let e=0;e<this.rows;e++)for(let s=0;s<this.cols;s++)t+=this.arr[e][s];return t}get DoesItContainComplexNumbers(){return this.arr.flat(1/0).some((t=>t instanceof s))}get min(){this.DoesItContainComplexNumbers&&console.error("Complex numbers are not comparable");let t=[];for(let e=0;e<this.rows;e++)t.push(a(...this.arr[e]));return a(...t)}get max(){this.DoesItContainComplexNumbers&&console.error("Complex numbers are not comparable");let t=[];for(let e=0;e<this.rows;e++)t.push(o(...this.arr[e]));return o(...t)}get minRows(){this.DoesItContainComplexNumbers&&console.error("Complex numbers are not comparable");let t=[];for(let e=0;e<this.rows;e++)t.push(a(...this.arr[e]));return t}get maxRows(){this.DoesItContainComplexNumbers&&console.error("Complex numbers are not comparable");let t=[];for(let e=0;e<this.rows;e++)t.push(o(...this.arr[e]));return t}get minCols(){return this.DoesItContainComplexNumbers&&console.error("Complex numbers are not comparable"),this.T.minRows}get maxCols(){return this.DoesItContainComplexNumbers&&console.error("Complex numbers are not comparable"),this.T.maxRows}static fromVector(t){return new at(t.length,1,t)}get toArray(){let t=[];for(let e=0;e<this.rows;e++)for(let s=0;s<this.cols;s++)t.push(this.arr[e][s]);return t}get print(){let t="[";for(let e=0;e<this.arr.length;e++)t+=(0!=e?" ":"")+` [${this.arr[e].map((t=>" "+t.toString()+" "))}],\n`;console.log(t.substring(0,t.length-2)+" ]"),document.write(t.substring(0,t.length-2)+" ]")}get table(){console.table(this.arr)}get serialize(){return JSON.stringify(this)}static deserialize(t){"string"==typeof t&&(t=JSON.parse(t));let e=new at(t.rows,t.cols);return e.arr=t.arr,e}DecompositionLU(){const[t,e]=tt(this);return{L:t,U:e}}static DecompositionLU(...t){const e=t.map((t=>t.clone.LU()));return 1===e.length?e[0]:e}DecompositionQR(){const[t,e]=nt(this);return{Q:t,R:e}}static DecompositionQR(...t){const e=t.map((t=>t.clone.DecompositionQr()));return 1===e.length?e[0]:e}DecompositionCholesky(){return{L:it(this)}}static DecompositionCholesky(...t){const e=t.map((t=>t.clone.DecompositionCholesky()));return 1===e.length?e[0]:e}get decomposition(){return{LU:()=>this.DecompositionLU(),QR:()=>this.DecompositionQR(),Cholesky:()=>this.DecompositionCholesky()}}static get decomposition(){return{LU:(...t)=>at.LU(...t),QR:(...t)=>at.QR(...t),CHOLESKY:(...t)=>at.CHOLESKY(...t)}}toTable(){var t=new DocumentFragment,e=new Array(this.rows).fill(null).map((()=>document.createElement("tr"))),s=this.arr.map((t=>t.map((()=>document.createElement("td")))));for(let t=0;t<s.length;t++)for(let r=0;r<s[0].length;r++)s[t][r].innerHTML=this.arr[t][r],e[t].appendChild(s[t][r]);return e.map((e=>t.appendChild(e))),t}toGrid(t,e={}){let s=Grid();return s.append(...this.map(t).arr.flat(1).map((t=>t.style(e)))),s.Columns(this.cols),s}sortTable(t=0,{type:e="num",order:s="asc"}={}){var r=this.T.arr.map((t=>t.map(((t,e)=>Object.assign({},{x:t,y:e}))))),n=this.T.arr.map((t=>t.map(((t,e)=>Object.assign({},{x:t,y:e})))));"num"===e?"asc"===s?r[t].sort(((t,e)=>t.x-e.x)):"desc"===s?r[t].sort(((t,e)=>e.x-t.x)):"toggle"===s&&(r[t][0].x>r[t][1].x?r[t].sort(((t,e)=>e.x-t.x)):r[t].sort(((t,e)=>t.x-e.x))):"alpha"===e&&("asc"===s?r[t].sort(((t,e)=>(""+t.x).localeCompare(""+e.x))):"desc"===s&&r[t].sort(((t,e)=>(""+e.x).localeCompare(""+t.x)))),s=r[t].map((t=>t.y));for(let e=0;e<r.length;e++)e!==t&&r[e].map(((t,e)=>t.y=s[e]));for(let e=0;e<r.length;e++)e!==t&&n[e].map(((t,n)=>t.x=r[e][s[n]].x));n[t]=r[t];var i=n.map((t=>t.map((t=>t.x))));return new at(i).T}}const ot=(t,e,s)=>new at(t,e,s),ht=(...t)=>new at(2,2,t),lt=(...t)=>new at(3,3,t),ct=(...t)=>new at(4,4,t);class ut{static resolve(t,e){return t.inv.dot(at.fromVector(e)).arr.flat(1).map((t=>+t.toFixed(10)))}}const mt=(t,...e)=>{const n=e.map((e=>{if(null===e)return t(null);if(["number","string","boolean","bigint","undefined"].includes(typeof e))return t(e);if(e instanceof Array)return e.map((e=>mt(t,e)));if(ArrayBuffer.isView(e))return e.map((e=>t(e)));if(e instanceof Set)return new Set(mt(t,...e));if(e instanceof Map)return new Map([...e].map((e=>[e[0],mt(t,e[1])])));if(e instanceof at)return new at(e.rows,e.cols,mt(e.arr.flat(1)));if(e instanceof s){const[s,n,i,a]=[e.a,e.b,e.z,e.phi];switch(t){case Math.log:return r(x(i),a);case Math.exp:return r(y(s)*w(n),y(s)*v(n));case Math.abs:return i;case Math.sqrt:return r(f(i)*w(a/2),f(i)*v(a/2));case p.cos:return r(w(s)*S(n),-v(s)*V(n));case p.sin:return r(v(s)*S(n),w(s)*V(n));case p.tan:{const t=w(2*s)+S(2*n);return r(v(2*s)/t,V(2*n)/t)}case p.cosh:return r(S(s)*w(n),V(s)*v(n));case p.sinh:return r(V(s)*w(n),S(s)*v(n));case p.tanh:{const t=S(2*s)+w(2*n);return r(V(2*s)/t,v(2*n)/t)}}}else if(e instanceof Object)return Object.fromEntries(Object.entries(e).map((e=>[e[0],mt(t,e[1])])))}));return 1==n.length?n[0]:n},pt=(t,e)=>{if("number"==typeof t){if("number"==typeof e)return t+e;if(e instanceof s)return r(t+e.a,e.b);if(e instanceof at)return at.nums(e.rows,e.cols,t).add(e);if(e instanceof Array)return e.map((e=>yt(e,t)))}else{if(t instanceof s||t instanceof at)return e instanceof Array?e.map((e=>t.clone.add(e))):t.clone.add(e);if(t instanceof Array){if(!(e instanceof Array))return t.map((t=>yt(t,e)));if(t.length===e.length)return t.map(((t,s)=>yt(t,e[s])))}}},dt=(t,e)=>{if("number"==typeof t){if("number"==typeof e)return t-e;if(e instanceof s)return r(t-e.a,-e.b);if(e instanceof at)return at.nums(e.rows,e.cols,t).sub(e);if(e instanceof Array)return e.map((e=>xt(e,t)))}else{if(t instanceof s||t instanceof at)return e instanceof Array?e.map((e=>t.clone.sub(e))):t.clone.sub(e);if(t instanceof Array){if(!(e instanceof Array))return t.map((t=>xt(t,e)));if(e instanceof Array&&t.length===e.length)return t.map(((t,s)=>xt(t,e[s])))}}},ft=(t,e)=>{if("number"==typeof t){if("number"==typeof e)return t*e;if(e instanceof s)return r(t*e.a,t*e.b);if(e instanceof at)return at.nums(e.rows,e.cols,t).mul(e);if(e instanceof Array)return e.map((e=>wt(t,e)))}else{if(t instanceof s||t instanceof at)return e instanceof Array?e.map((e=>t.clone.mul(e))):t.clone.mul(e);if(t instanceof Array){if(!(e instanceof Array))return t.map((t=>wt(t,e)));if(e instanceof Array&&t.length===e.length)return t.map(((t,s)=>wt(t,e[s])))}}},gt=(t,e)=>{if("number"==typeof t){if("number"==typeof e)return t/e;if(e instanceof s)return r(t/e.a,t/e.b);if(e instanceof at)return at.nums(e.rows,e.cols,t).div(e);if(e instanceof Array)return e.map((e=>vt(t,e)))}else{if(t instanceof s||t instanceof at)return e instanceof Array?e.map((e=>t.clone.div(e))):t.clone.div(e);if(t instanceof Array){if(!(e instanceof Array))return t.map((t=>vt(t,e)));if(e instanceof Array&&t.length===e.length)return t.map(((t,s)=>vt(t,e[s])))}}},bt=(t,e)=>{if("number"==typeof t){if("number"==typeof e)return t%e;if(e instanceof s)return r(t%e.a,t%e.b);if(e instanceof at)return at.nums(e.rows,e.cols,t).modulo(e);if(e instanceof Array)return e.map((e=>vt(t,e)))}else{if(t instanceof s||t instanceof at)return e instanceof Array?e.map((e=>t.clone.div(e))):t.clone.div(e);if(t instanceof Array&&!(e instanceof Array))return t.map((t=>yt(t,e)))}},yt=(t,...e)=>{var s=t;for(let t=0;t<e.length;t++)s=pt(s,e[t]);return s},xt=(t,...e)=>{var s=t;for(let t=0;t<e.length;t++)s=dt(s,e[t]);return s},wt=(t,...e)=>{var s=t;for(let t=0;t<e.length;t++)s=ft(s,e[t]);return s},vt=(t,...e)=>{var s=t;for(let t=0;t<e.length;t++)s=gt(s,e[t]);return s},kt=(t,...e)=>{var s=t;for(let t=0;t<e.length;t++)s=bt(s,e[t]);return s},{PI:Et,E:At}=Math,Mt=Number.EPSILON,Ct=t=>new Array(t).fill(0),Tt=t=>new Array(t).fill(1),_t=(t,e)=>new Array(e).fill(t),It=(t,e,r)=>{if("number"==typeof t)return e!==r?(t-e)/(r-e):0;if(t instanceof at)return new at(t.rows,t.cols,It(t.arr.flat(1),e,r));if(t instanceof s)return new s(It(t.a,e,r),It(t.b,e,r));if(t instanceof Array){if(t.every((t=>typeof("number"===t))))return t.map((t=>It(t,e,r)));{let e=new Array(t.length);for(let s=0;s<t.length;s++)e[s]=It(t[s])}}},Ot=(t,e,r)=>{if("number"==typeof t)return(r-e)*t+e;if(t instanceof at)return new at(t.rows,t.cols,Ot(t.arr.flat(1),e,r));if(t instanceof s)return new s(Ot(t.a,e,r),Ot(t.b,e,r));if(t instanceof Array){if(t.every((t=>typeof("number"===t))))return t.map((t=>Ot(t,e,r)));{let e=new Array(t.length);for(let s=0;s<t.length;s++)e[s]=Ot(t[s])}}},St=(t,e,r,n,i)=>{if("number"==typeof t)return Ot(It(t,e,r),n,i);if(t instanceof at)return new at(t.rows,t.cols,St(t.arr.flat(1),e,r,n,i));if(t instanceof s)return new s(St(t.a,r,n,i),St(t.b,e,r,n,i));if(t instanceof Array){if(t.every((t=>typeof("number"===t))))return t.map((t=>St(t,e,r,n,i)));{let s=new Array(t.length);for(let a=0;a<t.length;a++)s[a]=St(t[a],e,r,n,i)}}},Vt=(t,e,r)=>{const[n,i]=[a(e,r),o(e,r)];if("number"==typeof t)return a(o(t,n),i);if(t instanceof at)return new at(t.rows,t.cols,Vt(t.arr.flat(1),n,i));if(t instanceof s)return new s(Vt(t.a,n,i),Vt(t.b,n,i));if(t instanceof Array){if(t.every((t=>typeof("number"===t))))return t.map((t=>Vt(t,n,i)));{let e=new Array(t.length);for(let s=0;s<t.length;s++)e[s]=Vt(t[s],n,i)}}},jt=(t,e,s,r=!1)=>{let n=[];if(t<e)for(let i=t;r?i<=e:i<e;i+=s)n.push(10*i/10);else for(let i=t;r?i>=e:i>e;i-=s)n.push(10*i/10);return n},Dt=(t,e,n=d(e-t)+1,i=!0)=>{if(Math.floor(n)===n){if([t,e].every((t=>"number"==typeof t))){const[s,r]=[t,e].sort(((t,e)=>e-t));var a=[];let h;h=i?(s-r)/(n-1):(s-r)/n;for(var o=0;o<n;o++)t<e?a.push(r+h*o):a.push(s-h*o);return a}if([t,e].some((t=>t instanceof s))){const s=r(t),a=r(e);n=n||Math.abs(s.a-a.a)+1;const o=Dt(s.a,a.a,n,i),h=Dt(s.b,a.b,n,i);let l=new Array(n).fill(null);return l=l.map(((t,e)=>r(o[e],h[e]))),l}}},Rt=(t,e,s=e-t+1,r=At,n=!0)=>Dt(t,e,s,n).map((t=>g(r,t))),Pt=(t,e,n=d(e-t)+1,i=!0)=>{if(Math.floor(n)===n){if([t,e].every((t=>"number"==typeof t))){const[s,r]=[t,e].sort(((t,e)=>e-t));let a;a=b(s/r,i?n-1:n);const o=[r];for(let t=1;t<n;t++)o.push(o[t-1]*a);return t<e?o:o.reverse()}if([t,e].some((t=>t instanceof s))){const s=r(t),a=r(e);let o;n=n||Math.abs(s.a-a.a)+1,o=b(a.div(s),i?n-1:n);const h=[s];for(let t=1;t<n;t++)h.push(wt(h[t-1],o));return h}}},Ft=(...t)=>mt((t=>t*Math.PI/180),...t),Lt=(...t)=>mt((t=>t/Math.PI*180),...t),Nt=(t,e,s)=>{const[r,n]=[Math.min(e,s),Math.max(e,s)];return t>=r&&t<=n},zt=(t,e,s=1e-4)=>Math.abs(t-e)<=s,Bt=(t,e)=>t.reduce(((t,s)=>[...t,...e.map((t=>[s,t]))]),[]),Ut=(t,e)=>{let s,r=1;if(t==N(t)&&e==N(e)){for(s=2;s<=t&&s<=e;++s)t%s==0&&e%s==0&&(r=s);return r}console.log("error")},$t=(t,e)=>{let s;if(t==N(t)&&e==N(e)){for(s=t>e?t:e;s%t!=0||s%e!=0;)++s;return s}console.log("error")},Ht={add:yt,sub:xt,mul:wt,div:vt,modulo:kt,zeros:Ct,ones:Tt,nums:_t,norm:It,lerp:Ot,map:St,clamp:Vt,arange:jt,linspace:Dt,logspace:Rt,geomspace:Pt,sum:n,prod:i,accum:h,cartesianProduct:Bt,ppcm:$t,pgcd:Ut,deg2rad:Ft,rad2deg:Lt,inRange:Nt,isApproximatlyEqual:zt};const qt=t=>{const e=[],n=t.length;t[0]instanceof s||(t=t.map((t=>r(t,0))));for(let s=0;s<n;s++){let i=0,a=0;for(let e=0;e<n;e++){const r=2*Et*s*e/n;i+=t[e].a*w(r)+t[e].b*v(r),a+=-t[e].a*v(r)+t[e].b*w(r)}i/=n,a/=n,e[s]=r(i,a)}return{output:e,re:e.map((t=>t.a)),im:e.map((t=>t.b)),z:e.map((t=>t.z)),phi:e.map((t=>t.phi))}},Wt=t=>{const e=[],n=t.length;t[0]instanceof s||(t=t.map((t=>r(t,0))));for(let s=0;s<n;s++){let i=0,a=0;for(let e=0;e<n;e++){const r=2*Et*s*e/n;i+=t[e].a*w(r)+t[e].b*v(r),a+=t[e].a*v(r)+t[e].b*w(r)}i/=n,a/=n,e[s]=r(i,a)}return{output:e,re:e.map((t=>t.a)),im:e.map((t=>t.b)),z:e.map((t=>t.z)),phi:e.map((t=>t.phi))}},Xt=(t,e,s=!0)=>{const r=t.length,n=e.length,i=[],a=s?Math.max(r,n):r+n-1;for(let s=0;s<a;s++){let a=0;for(let i=0;i<n;i++){const o=s+i-Math.floor(n/2);a+=(o>=0&&o<r?t[o]:0)*e[i]}i.push(a)}return i},Yt=(t,e,s=!0)=>{t instanceof at||(t=ot(t)),e instanceof at||(e=ot(e));const r=t.rows,n=t.cols,i=s?Math.max(t.rows,e.rows):t.rows+e.rows-1,a=s?Math.max(t.cols,e.cols):t.cols+e.cols-1,o=e.rows,h=[];for(let s=0;s<i;s++){const i=[];for(let h=0;h<a;h++){let a=0;for(let i=0;i<o;i++)for(let l=0;l<o;l++){const c=s+i-Math.floor(o/2),u=h+l-Math.floor(o/2);a+=(c>=0&&c<r&&u>=0&&u<n?t[c][u]:0)*e[i][l]}i.push(a)}h.push(i)}return h},Zt=(t,e,s)=>t instanceof at||t instanceof Array&&t[0][0]?Yt(t,e,s):Xt(t,e,s);class Gt{constructor(t){this.input=t,this.input_fft=qt(this.input),this.output_fft=[]}lowPass(t){return this.input_fft.output.forEach(((e,s)=>{e=e.z<t?this.output_fft[s]=this.input_fft.output[s]:this.output_fft[s]=r(0,0)})),Wt(this.output_fft).re}highPass(t){return this.input_fft.output.forEach(((e,s)=>{e=e.z>t?this.output_fft[s]=this.input_fft.output[s]:this.output_fft[s]=r(0,0)})),Wt(this.output_fft).re}bandePass(){}bandeCoupe(){}}const Qt={zeros:Ct,ones:Tt,nums:_t,arange:jt,linspace:Dt,logspace:Rt,geomspace:Pt,map:St,norm:It,lerp:Ot,clamp:Vt,noise:(t,e=0,s=1)=>J.floats(t,e,s),echelon(t,e=0,s=1){t instanceof Array||(t=[t]);const r=mt((t=>t>=e?1:0),...t);return r instanceof Array?r.map((t=>t*s)):r*s},rampe(t,e=0,s=1){t instanceof Array||(t=[t]);const r=mt((t=>t>=e?t-e:0),...t);return r instanceof Array?r.map((t=>t*s)):r*s},sign(t,e=0,s=1){t instanceof Array||(t=[t]);const r=mt((t=>Math.sign(t-e)),...t);return r instanceof Array?r.map((t=>t*s)):r*s},rect(t,e,s=0,r=1){t instanceof Array||(t=[t]);const n=mt((t=>s-e/2<t&&s+e/2>t?1-2*d(t/e):0),...t);return n instanceof Array?n.map((t=>t*r)):n*r},tri(t,e,s=0,r=1){t instanceof Array||(t=[t]);const n=mt((t=>s-e/2<t&&s+e/2>t?1-2*d(t/e):0),...t);return n instanceof Array?n.map((t=>t*r)):n*r},dirac:(t,e)=>mt((t=>t===e?1/0:0),...t),lorentz(t,e=0,s=1){t instanceof Array||(t=[t]);const r=mt((t=>1/(1+(t-e)**2)),...t);return r instanceof Array?r.map((t=>t*s)):r*s},sinc(t,e,s=1){t instanceof Array||(t=[t]);const r=mt((t=>A(t-e)),...t);return r instanceof Array?r.map((t=>t*s)):r*s},square(t,e=1,s=1){t instanceof Array||(t=[t]);const r=mt((t=>$(v(2*t*Math.PI/e))),...t);return r instanceof Array?r.map((t=>t*s)):r*s},sawtooth(){},conv:Zt,conv1d:Xt,conv2d:Yt,circularConv:(t,e)=>Zt(t,e,!0),linearConv:(t,e)=>Zt(t,e,!1),circularConv1d:(t,e)=>Xt(t,e,!0),linearConv1d:(t,e)=>Xt(t,e,!1),circularConv2d:(t,e)=>Yt(t,e,!0),linearConv2d:(t,e)=>Yt(t,e,!1),fft:qt,ifft:Wt,filter:t=>new Gt(t)};Object.defineProperties(Number.prototype,{inRange:{value:function(t,e){return Nt(this.valueOf(),t,e)}},add:{value:function(...t){return yt(this.valueOf(),...t)}},sub:{value:function(...t){return xt(this.valueOf(),...t)}},mul:{value:function(...t){return wt(this.valueOf(),...t)}},div:{value:function(...t){return vt(this.valueOf(),...t)}},modulo:{value:function(...t){return kt(this.valueOf(),...t)}},norm:{value:function(t,e){return norm(this.valueOf(),t,e)}},lerp:{value:function(t,e){return lerp(this.valueOf(),t,e)}},map:{value:function(t,e,s,r){return map(this.valueOf(),t,e,s,r)}},clamp:{value:function(t,e){return clamp(this.valueOf(),t,e)}},toDeg:{value:function(){return Lt(this.valueOf())}},toRad:{value:function(){return Ft(this.valueOf())}}}),Object.defineProperties(Array.prototype,{inRange:{value:function(t,e){return Nt(this.valueOf(),t,e)}},add:{value:function(...t){return yt(this.valueOf(),...t)}},sub:{value:function(...t){return xt(this.valueOf(),...t)}},mul:{value:function(...t){return wt(this.valueOf(),...t)}},div:{value:function(...t){return vt(this.valueOf(),...t)}},modulo:{value:function(...t){return kt(this.valueOf(),...t)}},norm:{value:function(t,e){return norm(this.valueOf(),t,e)}},lerp:{value:function(t,e){return lerp(this.valueOf(),t,e)}},_map:{value:function(t,e,s,r){return map(this.valueOf(),t,e,s,r)}},clamp:{value:function(t,e){return clamp(this.valueOf(),t,e)}},deepMap:{value:function(t){return mt(t,...this.valueOf())}}});const Kt={PI:Et,E:At,EPSILON:Mt,Random:J,complex:r,Complex:s,Matrix:at,LinearSystem:ut,matrix:ot,matrix2:ht,matrix3:lt,matrix4:ct,cos:w,sin:v,tan:k,sinc:A,sec:E,csc:M,cot:C,abs:d,sqrt:f,pow:g,sqrtn:b,e:y,ln:x,acos:T,asin:_,atan:I,acot:O,cosh:S,sinh:V,tanh:j,coth:D,acosh:R,asinh:P,atanh:F,min:a,max:o,sign:$,floor:N,ceil:L,round:z,fact:U,hypot:q,sig:H,atan2:B,Utils:Ht,mapfun:mt,nums:_t,zeros:Ct,ones:Tt,sum:n,prod:i,add:yt,mul:wt,div:vt,sub:xt,modulo:kt,rad2deg:Lt,deg2rad:Ft,arange:jt,linspace:Dt,logspace:Rt,geomspace:Pt,norm:It,lerp:Ot,map:St,clamp:Vt,pgcd:Ut,ppcm:$t,isApproximatlyEqual:zt,inRange:Nt,cartesianProduct:Bt,Discret:K,Logic:W,Base:X,Permutation:Y,Combinaison:Z,PowerSet:G,subset:Q,Signal:Qt,ExtractAll:function(){const t=Object.keys(this);for(let e=0;e<t.length;e++){const s=t[e];"ExtractAll"!==s&&"RemoveAll"!==s&&(globalThis[s]=this[s])}return this},RemoveAll:function(){const t=Object.keys(this);for(let e=0;e<t.length;e++){const s=t[e];"RemoveAll"!==s&&delete globalThis[s]}return this}},Jt=(t,e="px")=>("number"==typeof t&&(t+=e),t instanceof Array&&(t=t.map((t=>"number"==typeof t?t+=e:t)).join(" ")),t);class te{constructor(t={}){this.target=null,this.styles=new Map([["default",t]]),this.cache={isHidden:!1,isFaddedOut:!1,transformation:{Flip:[0,0,0],matrix:new at([[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]])}}}style(t,{target:e="parent",maskVector:s=null}={}){return"parent"===e||0===e?((t,e)=>{t&&Object.assign(t.style,e)})(this.target.element,t):"parent"!==e&&0!==e||(s?this.items.map(((e,r)=>1==s[r]&&e.style(t))):this.items.map((e=>e.style(t)))),this}linkTo(t){return this.target=t,this}use(t="default"){return this.style(this.styles.get(t)),this}update(t,e){const s=this.styles.get(t);return s?this.styles.set(t,Object.assign(s,e)):this.styles.set(t,e),this}add(t,e){return this.styles.set(t,e),this}replace(t,e){return this.styles.set(t,e),this}delete(...t){return t.forEach((t=>this.styles.delete(t))),this}updateDefaultStyle(){const t=Object.fromEntries(Object.entries(this.target.element.style).filter((t=>isNaN(+t[0]))));return this.update("default",t),this}hover(t){return t&&this.add("hover",t),this.target.element.addEventListener("pointerenter",(()=>this.use("hover"))),this.target.element.addEventListener("pointerleave",(()=>this.use("default"))),this}size(t,e,{target:s,maskVector:r}={}){return this.style({width:t,height:e},{target:s,maskVector:r}),this}width(t,{target:e,maskVector:s}={}){if(t instanceof Object){if(t instanceof Array&&(t={min:t[0],max:t[1]}),"min"in t||"max"in t){let r=t.min??t.max,n=t.max??t.min;r=Jt(r,"px"),n=Jt(n,"px"),this.style({minWidth:r,maxWidth:n},{target:e,maskVector:s})}}else t=Jt(t,"px"),this.style({width:t},{target:e,maskVector:s});return this}height(t,{target:e,maskVector:s}={}){if(t instanceof Object){if(t instanceof Array&&(t={min:t[0],max:t[1]}),"min"in t||"max"in t){let r=t.min??t.max,n=t.max??t.min;r=Jt(r,"px"),n=Jt(n,"px"),this.style({minHeight:r,maxHeight:n},{target:e,maskVector:s})}}else t=Jt(t,"px"),this.style({height:t},{target:e,maskVector:s});return this}hide({after:t,target:e,maskVector:s}={}){if("number"==typeof t){const r=()=>this.hide({target:e,maskVector:s});setTimeout(r,t),clearTimeout(r)}else this.cache.isHidden=!0,this.style({display:"none"},{target:e,maskVector:s});return this}show({after:t,target:e,maskVector:s}={}){if("number"==typeof t){const r=()=>this.show({target:e,maskVector:s});setTimeout(r,t),clearTimeout(r)}else this.cache.isHidden=!1,this.style({display:""},{target:e,maskVector:s});return this}color(t,{target:e,maskVector:s}={}){return this.style({color:t},{target:e,maskVector:s}),this}background(t,{target:e,maskVector:s}={}){return this.style({background:t},{target:e,maskVector:s}),this}backgroundColor(t,{target:e,maskVector:s}={}){return this.style({backgroundColor:t},{target:e,maskVector:s}),this}opacity(t,{target:e,maskVector:s}={}){return this.style({opacity:t},{target:e,maskVector:s}),this}position(t,{target:e,maskVector:s}={}){return this.style({position:t},{target:e,maskVector:s}),this}display(t,{target:e,maskVector:s}={}){return this.style({display:t},{target:e,maskVector:s}),this}zIndex(t,{target:e,maskVector:s}={}){return this.style({zIndex:t},{target:e,maskVector:s}),this}float(t,{target:e,maskVector:s}={}){return this.style({float:t},{target:e,maskVector:s}),this}border(t="1px solid red",{target:e,maskVector:s}={}){return this.style({border:t},{target:e,maskVector:s}),this}borderTop(t="1px solid red",{target:e,maskVector:s}={}){return this.style({borderTop:t},{target:e,maskVector:s}),this}borderRight(t="1px solid red",{target:e,maskVector:s}={}){return this.style({borderRight:t},{target:e,maskVector:s}),this}borderBottom(t="1px solid red",{target:e,maskVector:s}={}){return this.style({borderBottom:t},{target:e,maskVector:s}),this}borderLeft(t="1px solid red",{target:e,maskVector:s}={}){return this.style({borderLeft:t},{target:e,maskVector:s}),this}borderRadius(t,{target:e,maskVector:s}={}){return t=Jt(t,"px"),this.style({borderRadius:t},{target:e,maskVector:s}),this}margin(t,{target:e,maskVector:s}={}){return t=Jt(t,"px"),this.style({margin:t},{target:e,maskVector:s}),this}marginTop(t,{target:e,maskVector:s}={}){return t=Jt(t,"px"),this.style({marginTop:t},{target:e,maskVector:s}),this}marginRight(t,{target:e,maskVector:s}={}){return t=Jt(t,"px"),this.style({marginRight:t},{target:e,maskVector:s}),this}marginBootom(t,{target:e,maskVector:s}={}){return t=Jt(t,"px"),this.style({marginBootom:t},{target:e,maskVector:s}),this}marginLeft(t,{target:e,maskVector:s}={}){return t=Jt(t,"px"),this.style({marginLeft:t},{target:e,maskVector:s}),this}padding(t,{target:e,maskVector:s}={}){return t=Jt(t,"px"),this.style({padding:t},{target:e,maskVector:s}),this}paddingTop(t,{target:e,maskVector:s}={}){return t=Jt(t,"px"),this.style({paddingTop:t},{target:e,maskVector:s}),this}paddingRight(t,{target:e,maskVector:s}={}){return t=Jt(t,"px"),this.style({paddingRight:t},{target:e,maskVector:s}),this}paddingBootom(t,{target:e,maskVector:s}={}){return t=Jt(t,"px"),this.style({paddingBootom:t},{target:e,maskVector:s}),this}paddingLeft(t,{target:e,maskVector:s}={}){return t=Jt(t,"px"),this.style({paddingLeft:t},{target:e,maskVector:s}),this}font(t,{target:e,maskVector:s}={}){return this.style({font:t},{target:e,maskVector:s}),this}fontFamily(t="",{target:e,maskVector:s}={}){return this.style({fontFamily:t},{target:e,maskVector:s}),this}fontSize(t,{target:e,maskVector:s}={}){return this.style({fontSize:t},{target:e,maskVector:s}),this}cursor(t="pointer"){return this.style({cursor:t}),this}overflow(t,e,{target:s,maskVector:r}={}){const n=["hidden","auto"];return this.style({overflowX:"number"==typeof t?n[t]:t,overflowY:"number"==typeof e?n[e]:e},{target:s,maskVector:r}),this}clip(t,{target:e,maskVector:s}={}){return"string"==typeof t&&(t="polygon("+t+")"),this.style({clipPath:t},{target:e,maskVector:s}),this}fadeOut(t=1){return this.style({transition:t/1e3+"s",opacity:0}),this.cache.isFaddedOut=!0,this}fadeIn(t=1){return this.style({transition:t/1e3+"s",opacity:1}),this.cache.isFaddedOut=!1,this}toggleFade(t=1e3,e=t){return this.cache.isFaddedOut?this.fadeIn(t):this.fadeOut(e),this}#s(t){const e=this.cache.transformation.matrix.arr.join(",");this.style({transform:`matrix3d(${e})`,"-webkit-transform":`matrix3d(${e})`,"-moz-transform":`matrix3d(${e})`,"-ms-transform":`matrix3d(${e})`,"-o-transform":`matrix3d(${e})`}),0!=t&&this.style({transition:`transform ${t/1e3}s ease`})}translate(t,e=t,s=0){return this.cache.transformation.matrix.set(3,0,t),this.cache.transformation.matrix.set(3,1,e),this.cache.transformation.matrix.arr.join(","),this.#s(s),this}translateX(t,e=0){return this.cache.transformation.matrix.set(3,0,t),this.cache.transformation.matrix.arr.join(","),this.#s(e),this}translateY(t,e=0){return this.cache.transformation.matrix.set(3,1,t),this.cache.transformation.matrix.arr.join(","),this.#s(e),this}scale(t,e=t,s=0){return this.cache.transformation.matrix.set(0,0,t),this.cache.transformation.matrix.set(1,1,e),this.cache.transformation.matrix.arr.join(","),this.#s(s),this}scaleX(t=1,e=0){return this.cache.transformation.matrix.set(0,0,t),this.cache.transformation.matrix.arr.join(","),this.#s(e),this}scaleY(t=1,e=0){return this.cache.transformation.matrix.set(1,1,t),this.cache.transformation.matrix.arr.join(","),this.#s(e),this}skew(t,e=t,s=0){return this.cache.transformation.matrix.set(0,1,t),this.cache.transformation.matrix.set(1,0,e),this.cache.transformation.matrix.arr.join(","),this.#s(s),this}skewX(t=1,e=0){return this.cache.transformation.matrix.set(0,1,t),this.cache.transformation.matrix.arr.join(","),this.#s(e),this}skewY(t=1,e=0){return this.cache.transformation.matrix.set(1,0,t),this.cache.transformation.matrix.arr.join(","),this.#s(e),this}rotateX(t,e=0){return this.cache.transformation.matrix.set(1,1,w(t)),this.cache.transformation.matrix.set(1,2,-v(t)),this.cache.transformation.matrix.set(2,1,v(t)),this.cache.transformation.matrix.set(1,2,w(t)),this.#s(e),this}rotateY(t,e=0){return this.cache.transformation.matrix.set(0,0,w(t)),this.cache.transformation.matrix.set(0,2,v(t)),this.cache.transformation.matrix.set(2,0,-v(t)),this.cache.transformation.matrix.set(2,2,w(t)),this.#s(e),this}rotateZ(t,e=0){return this.cache.transformation.matrix.set(0,0,w(t)),this.cache.transformation.matrix.set(0,1,-v(t)),this.cache.transformation.matrix.set(1,0,v(t)),this.cache.transformation.matrix.set(1,1,w(t)),this.#s(e),this}flipeX({t:t=1}={}){return this.cache.transformation.Flip[0]+=180,this.cache.transformation.Flip[0]%=360,this.rotateX(this.cache.transformation.Flip[0],t),this}flipeY(t=1){return this.cache.transformation.Flip[1]+=180,this.cache.transformation.Flip[1]%=360,this.rotateY(this.cache.transformation.Flip[1],t),this}flipeZ(t=1){return this.cache.transformation.Flip[2]+=180,this.cache.transformation.Flip[2]%=360,this.rotateZ(this.cache.transformation.Flip[2],t),this}slideHeightIn(t=1,e=this.h){return this.style({transition:t+"s",height:e}),this}slideHeightOut(t=1){return this.style({transition:t+"s",height:0}),this.target.element.addEventListener("transitionend",(()=>this.style({opacity:"none"}))),this}slideWidthIn(t=1,e=this.w){return this.style({transition:t+"s",width:e}),this}slideWidthOut(t=1){this.style({transition:t+"s",width:0});const e=()=>{this.style({opacity:"none"})};return this.target.element.addEventListener("transitionend",e),this.target.element.removeEventListener("transitionend",e),this}slideIn({t:t=1,w:e="100%",h:s="auto"}={}){return this.style({transition:t+"s",width:e,height:s,visibility:"visible"}),this}slideOut({t:t=1,width:e=0,height:s=0}={}){this.style({visibility:"hidden",transition:t+"s",opacity:"none",width:e,height:s});const r=()=>{this.style({opacity:"none"})};return this.target.element.addEventListener("transitionend",r),this.target.element.removeEventListener("transitionend",r),this}}const ee={Key:{data:[],dispose:function(){return this.data.map((t=>t?.event?.dispose())),this},destroy:function(){return this.dispose(),this.data.length=0,this}},Pointer:{data:[],dispose:function(){return this.data.map((t=>t?.event?.dispose())),this},destroy:function(){return this.dispose(),this.data.length=0,this}},Drag:{data:[],dispose:function(){return this.data.map((t=>t?.event?.dispose())),this},destroy:function(){return this.dispose(),this.data.length=0,this}}};function se(t,e,s,r){return this.event=t,this.cache.preventDefault[e]&&t.preventDefault(),s&&s(),this.cache.stream.enabled[e]&&r&&this.cache.stream.history[e].push(r),this.cache.callbacks[e].map((t=>t(this))),this}class re{constructor(t){this.target=null,this.setTarget(t),this.__dispose=this.dispose.bind(this)}get targetElement(){return this.target.element}setTarget(t){return this.target=t,this}__handle(t,e,s){const r="drag"===t?t:`${this.cache.prefixe}${t}`;return this.dispose(s),this.targetElement.addEventListener(r,e),this}__onEvent(t,e,...s){if(0===s.length){if(!(this.cache.callbacks.length>1))return this;this.cache.callbacks.map((t=>e=>t.call(this,e)))}else this.cache.callbacks[t]=s.map((t=>e=>t.call(this,e)));return this.__handle(t,this.__controller[t],e),this}preventDefault(t={}){return Object.assign(this.cache.preventDefault,t),this}pause(t={}){t={...Object.fromEntries(Object.keys(this.cache.stream.enabled).map((t=>[t,!0]))),...t};for(let e in t)t[e]&&(this.targetElement.removeEventListener(`${this.cache.prefixe}${e}`,this.__controller[`${this.cache.prefixe}${e}`]),this.cache.paused[`${this.cache.prefixe}${e}`]=!0);return this}resume(t={}){t={...Object.fromEntries(Object.keys(this.cache.stream.enabled).map((t=>[t,!0]))),...t};for(let e in t)t[e]&&(this.targetElement.addEventListener(`${this.cache.prefixe}${e}`,this.__controller[`${this.cache.prefixe}${e}`]),this.cache.paused[`${this.cache.prefixe}${e}`]=!1);return this}dispose(t={}){return this.pause(t),this}stream(t={}){this.cache.stream.t0=Date.now();return t={...Object.fromEntries(Object.keys(this.cache.stream.enabled).map((t=>[t,!0]))),...t},Object.assign(this.cache.stream.enabled,t),this}clear(t={}){t={...Object.fromEntries(Object.keys(this.cache.stream.clear).map((t=>[t,!0]))),...t};for(let e in t)t[e]&&(this.cache.stream.history[e]=[]);return this}get Garbage(){return ee}}function ne(t){se.call(this,t,"down",(()=>{this.dx=parseInt(t.offsetX),this.dy=parseInt(t.offsetY),this.isDown=!0}),{x:this.dx,y:this.dy,t:Date.now()-this.cache.stream.t0})}function ie(t){se.call(this,t,"move",(()=>{this.mx=parseInt(t.offsetX),this.my=parseInt(t.offsetY),this.isMoving=!0}),{x:this.mx,y:this.my,t:Date.now()-this.cache.stream.t0})}function ae(t){se.call(this,t,"up",(()=>{this.ux=parseInt(t.offsetX),this.uy=parseInt(t.offsetY),this.isDown=!1;const e=this.dx,s=this.dy,r=this.ux,n=this.uy,i=(r-e)/this.Target.Width,a=(s-n)/this.Target.Height,o=i<0?"left":i>0?"right":"none",h=a<0?"bottom":a>0?"top":"none";this.swippe={h:o,v:h,delta_x:i,delta_y:a}}),{x:this.ux,y:this.uy,t:Date.now()-this.cache.stream.t0})}function oe(t){se.call(this,t,"enter",null,null)}function he(t){se.call(this,t,"leave",null,null)}function le(t){se.call(this,t,"out",null,null)}class ce extends re{constructor(t){super(t),this.event=null,this.dx=0,this.dy=0,this.dt=0,this.mx=0,this.my=0,this.mt=0,this.ux=0,this.uy=0,this.ut=0,this.swippe={h:null,v:null,delta_x:0,delta_y:0},this.isMoving=!1,this.isDown=!1,this.cache={prefixe:"pointer",preventDefault:{down:!1,move:!1,up:!1,enter:!1,out:!1,leave:!1},paused:{down:!1,move:!1,up:!1,enter:!1,out:!1,leave:!1},stream:{enabled:{down:!1,move:!1,up:!1,enter:!1,out:!1,leave:!1},clear:{down:!1,move:!1,up:!1,enter:!1,out:!1,leave:!1},history:{down:[],move:[],up:[],enter:[],out:[],leave:[]}},callbacks:{down:[t=>console.log({dx:t.dx,dy:t.dy,down:t.down,move:t.move,t:t.dt})],move:[t=>console.log({mx:t.mx,my:t.my,down:t.down,move:t.move,t:t.dt})],up:[t=>console.log({ux:t.ux,uy:t.uy,down:t.down,move:t.move,t:t.dt})],enter:[t=>console.log({dx:t.dx,dy:t.dy,down:t.down,move:t.move,t:t.dt})],out:[t=>console.log({mx:t.mx,my:t.my,down:t.down,move:t.move,t:t.dt})],leave:[t=>console.log({ux:t.ux,uy:t.uy,down:t.down,move:t.move,t:t.dt})]}},this.__controller={down:ne.bind(this),move:ie.bind(this),up:ae.bind(this),enter:oe.bind(this),out:le.bind(this),leave:he.bind(this)}}onDown(...t){return 0===t.length&&(t=[()=>{}]),this.__onEvent("down",{down:!0,move:!1,up:!1,enter:!1,out:!1,leave:!1},...t),this}onMove(...t){return 0===t.length&&(t=[()=>{}]),this.__onEvent("move",{down:!1,move:!0,up:!1,enter:!1,out:!1,leave:!1},...t),this}onUp(...t){return 0===t.length&&(t=[()=>{}]),this.__onEvent("up",{down:!1,move:!1,up:!0,enter:!1,out:!1,leave:!1},...t),this}onEnter(...t){return 0===t.length&&(t=[()=>{}]),this.__onEvent("enter",{down:!1,move:!1,up:!1,enter:!0,out:!1,leave:!1},...t),this}onOut(...t){return 0===t.length&&(t=[()=>{}]),this.__onEvent("out",{down:!1,move:!1,up:!1,enter:!1,out:!0,leave:!1},...t),this}onLeave(...t){return 0===t.length&&(t=[()=>{}]),this.__onEvent("leave",{down:!1,move:!1,up:!1,enter:!1,out:!1,leave:!0},...t),this}}var ue=t=>new ce(t);function me(t){se.call(this,t,"down",(()=>this.kd=t.key),{key:t.key,t:10})}function pe(t){se.call(this,t,"press",(()=>this.kp=t.key),{key:t.key,t:10})}function de(t){se.call(this,t,"up",(()=>this.ku=t.key),{key:t.key,t:10})}class fe extends re{constructor(t){super(t),this.kp=null,this.kd=null,this.ku=null,this.t=0,this.cache={prefixe:"key",preventDefault:{down:!1,press:!1,up:!1},paused:{down:!1,press:!1,up:!1},stream:{enabled:{down:!1,press:!1,up:!1},clear:{down:!0,press:!1,up:!1},history:{down:[],press:[],up:[]}},callbacks:{down:[t=>console.log({kd:t.kd})],press:[t=>console.log({kp:t.kp})],up:[t=>console.log({ku:t.ku})]},successifKeysCallback:{down:[t=>console.log(1111)],press:[t=>console.log(1112)],kyup:[t=>console.log(1113)]}},this.__controller={down:me.bind(this),press:pe.bind(this),up:de.bind(this)}}onDown(...t){return this.__onEvent("down",{down:!0},...t),this}onPress(...t){return this.__onEvent("press",{press:!0},...t),this}onUp(...t){return this.__onEvent("up",{up:!0},...t),this}}var ge=t=>new fe(t);function be(t){se(this,t,"start",null)}function ye(t){se.call(this,t,"drag",null,null)}function xe(t){se.call(this,t,"end",null,null)}function we(t){se.call(this,t,"drop",null,null)}class ve extends re{constructor(t){super(t),this.Target.setAttribute("draggable",!0),this.cache={prefixe:"drag",preventDefault:{drag:!1,start:!1,end:!1,enter:!1,leave:!1,over:!1},paused:{drag:!1,start:!1,end:!1,enter:!1,leave:!1,over:!1},enabled:{drag:!1,start:!1,end:!1,enter:!1,leave:!1,over:!1},callbacks:{drag:[],start:[],end:[],enter:[],leave:[],over:[]},stream:{enabled:{drag:!1,start:!1,end:!1,enter:!1,leave:!1,over:!1},clear:{drag:!1,start:!1,end:!1,enter:!1,leave:!1,over:!1},history:{drag:[],start:[],end:[],enter:[],leave:[],over:[]}}},this.__controller={start:be.bind(this),drag:ye.bind(this),end:xe.bind(this)}}onStart(...t){return this.__onEvent("start",{},...t),this}onDrag(...t){return this.__onEvent("drag",{},...t),this}onEnd(...t){return this.__onEvent("end",{},...t),this}}class ke extends re{constructor(t){super(t),this.event=null,this.cache={prefixe:"",preventDefault:{drop:!1},paused:{drop:!1},stream:{enabled:{drop:!1},clear:{drop:!1},history:{drop:[]}},callbacks:{drop:[t=>console.log({dx:t.dx,dy:t.dy,drop:t.drop,move:t.move,t:t.dt})]}},this.__controller={drop:we.bind(this)}}onDrop(...t){return this.__onEvent("drop",{},...t),this}}const Ee=t=>new ve(t),Ae=t=>new ke(t);function Me(t){se.call(this,t,"click",null,null)}function Ce(t){se.call(this,t,"dbclick",null,null)}class Te extends re{constructor(t){super(t),this.event=null,this.cache={prefixe:"",preventDefault:{click:!1,dbclick:!1},paused:{click:!1,dbclick:!1},stream:{enabled:{click:!1,dbclick:!1},clear:{click:!1,dbclick:!1},history:{click:[],dbclick:[]}},callbacks:{click:[],dbclick:[]}},this.__controller={click:Me.bind(this),dbclick:Ce.bind(this)}}onClick(...t){return this.__onEvent("click",{},...t),this}onDbClick(...t){return this.__onEvent("dbclick",{},...t),this}}const _e=t=>new Te(t);function Ie(t){se.call(this,t,"copy",null,null)}function Oe(t){se.call(this,t,"cut",null,null)}function Se(t){se.call(this,t,"paste",null,null)}function Ve(t){se.call(this,t,"select",null,null)}class je extends re{constructor(t){super(t),this.event=null,this.cache={prefixe:"",preventDefault:{copy:!1,cut:!1,paste:!1,select:!1},paused:{copy:!1,cut:!1,paste:!1,select:!1},stream:{enabled:{copy:!1,cut:!1,paste:!1,select:!1},clear:{copy:!1,cut:!1,paste:!1,select:!1},history:{copy:[],cut:[],paste:[],select:[]}},callbacks:{copy:[],cut:[],paste:[],select:[]}},this.__controller={copy:Ie.bind(this),cut:Oe.bind(this),paste:Se.bind(this),select:Ve.bind(this)}}onCopy(...t){return this.__onEvent("copy",{},...t),this}onCut(...t){return this.__onEvent("cut",{},...t),this}onPaste(...t){return this.__onEvent("paste",{},...t),this}onSelect(...t){return this.__onEvent("select",{},...t),this}}const De=t=>new je(t);function Re(t){se.call(this,t,"focus",null,null)}function Pe(t){se.call(this,t,"blur",null,null)}class Fe extends re{constructor(t){super(t),this.event=null,this.cache={prefixe:"",preventDefault:{focus:!1,blur:!1},paused:{focus:!1,blur:!1},stream:{enabled:{focus:!1,blur:!1},clear:{focus:!1,blur:!1},history:{focus:[],blur:[]}},callbacks:{focus:[],blur:[]}},this.__controller={focus:Re.bind(this),blur:Pe.bind(this)}}onFocus(...t){return this.__onEvent("focus",{},...t),this}onBlur(...t){return this.__onEvent("blur",{},...t),this}}const Le=t=>new Fe(t);function Ne(t){se.call(this,t,"input",null,null)}function ze(t){se.call(this,t,"change",null,null)}class Be extends re{constructor(t){super(t),this.event=null,this.cache={prefixe:"",preventDefault:{input:!1,change:!1},paused:{input:!1,change:!1},stream:{enabled:{input:!1,change:!1},clear:{input:!1,change:!1},history:{input:[],change:[]}},callbacks:{input:[],change:[]}},this.__controller={input:Ne.bind(this),change:ze.bind(this)}}get value(){return this.target.value}onInput(...t){return this.__onEvent("input",{},...t),this}onChange(...t){return this.__onEvent("change",{},...t),this}}const Ue=t=>new Be(t),$e=t=>function(e){se.call(this,e,t,null,null)};class He extends re{constructor(t){super(t),this.event=null,this.cache={prefixe:"",preventDefault:{},paused:{},stream:{enabled:{},clear:{},history:{}},callbacks:{}},this.__controller={}}#r(t){return this.cache.preventDefault[t]=!1,this.cache.paused[t]=!1,this.cache.stream.enabled=!1,this.cache.stream.clear=!1,this.cache.stream.history=[],this.cache.callbacks[t]=[],this.__controller[t]=$e(t).bind(this),this}on(t,...e){return this.__controller[t]||this.#r(t),this.__onEvent(t,{},...e),this}emit(t,e={}){this.__controller[t]||this.#r(t),this.detail=e;const s=new Event(t);return this.targetElement.dispatchEvent(s),this}}const qe=t=>new He(t);class We{constructor(t=""){this.channel=new BroadcastChannel(t),this.EVENTS_DATAS_PAIRS=new Map,this.EVENTS_HANDLERS_PAIRS=new Map,this.LAST_RECEIVED_EVENT="",this.UUID="ziko-channel"+J.string(10),this.SUBSCRIBERS=new Set([this.UUID])}get broadcast(){return this}emit(t,e){return this.EVENTS_DATAS_PAIRS.set(t,e),this.#n(t),this}on(t,e=console.log){return this.EVENTS_HANDLERS_PAIRS.set(t,e),this.#i(),this}#i(){return this.channel.onmessage=t=>{this.LAST_RECEIVED_EVENT=t.data.last_sended_event;const e=t.data.userId;this.SUBSCRIBERS.add(e);const s=t.data.EVENTS_DATAS_PAIRS.get(this.LAST_RECEIVED_EVENT),r=this.EVENTS_HANDLERS_PAIRS.get(this.LAST_RECEIVED_EVENT);s&&r&&r(s)},this}#n(t){return this.channel.postMessage({EVENTS_DATAS_PAIRS:this.EVENTS_DATAS_PAIRS,last_sended_event:t,userId:this.UUID}),this}close(){return this.channel.close(),this}}const Xe={Pointer:ue,Key:ge,Drag:Ee,Drop:Ae,Click:_e,Clipboard:De,Focus:Le,Input:Ue,CustomEvent:qe,Channel:t=>new We(t),ExtractAll:function(){const t=Object.keys(this);for(let e=0;e<t.length;e++){const s=t[e];"ExtractAll"!==s&&"RemoveAll"!==s&&(globalThis[s]=this[s])}return this},RemoveAll:function(){const t=Object.keys(this);for(let e=0;e<t.length;e++){const s=t[e];"RemoveAll"!==s&&delete globalThis[s]}return this}};class Ye{constructor(t,e,{threshold:s=0,margin:r=0}={}){this.target=t,this.config={threshold:s,margin:r},this.observer=new IntersectionObserver((t=>{this.entrie=t[0],e(this)}),{threshold:this.threshold})}get ratio(){return this.entrie.intersectionRatio}get isIntersecting(){return this.entrie.isIntersecting}setThreshould(t){return this.config.threshold=t,this}setMargin(t){return t="number"==typeof t?t+"px":t,this.config.margin=t,this}start(){return this.observer.observe(this.target.element),this}stop(){return this}}class Ze{constructor(t,e){this.target=t,this.contentRect=null,this.observer=new ResizeObserver((()=>{e(this)}))}get BoundingRect(){return this.target.element.getBoundingClientRect()}get width(){return this.BoundingRect.width}get height(){return this.BoundingRect.height}get top(){return this.BoundingRect.top}get bottom(){return this.BoundingRect.bottom}get right(){return this.BoundingRect.right}get left(){return this.BoundingRect.left}get x(){return this.BoundingRect.x}get y(){return this.boundingRect.y}start(){return this.observer.observe(this.target.element),this}stop(){return this.observer.unobserve(this.target.element),this}}class Ge{constructor(t){var e;this.target=globalThis.document.body,"string"==typeof t&&(t=globalThis.document.createElement(t)),this.element=t,this.uuid=this.constructor.name+"-"+J.string(10),this.cache={isRoot:!1,isHidden:!1,isFrozzen:!1,transformMatrix:ot([[0,0,0],[0,0,0],[1,1,0]]),style:(e={},new te(e)),attributes:{},filters:{}},this.items=[],this.events={ptr:null,key:null,drag:null,drop:null,click:null,clipboard:null,focus:null,custom:null},this.observer={resize:null,intersection:null},this.cache.style.linkTo(this),this.style({position:"relative",boxSizing:"border-box",fontFamily:"verdana",margin:0,padding:0}),this.size("auto","auto")}get st(){return this.cache.style}get attr(){return this.cache.attributes}get evt(){return this.cache.events}get __app__(){if(this.cache.isRoot)return this;let t=this.parent;for(;;){if(!t)return null;if(t.cache.isRoot)return t;t=t.parent}}clone(){const t=new this.constructor;if(t.__proto__=this.__proto__,this.items.length){const e=[...this.items].map((t=>t.clone()));t.append(...e)}else t.element=this.element.cloneNode(!0);return t}style(t,{target:e="parent",maskVector:s=null}={}){return this.st.style(t,{target:e,maskVector:s}),this}size(t,e,{target:s,maskVector:r}={}){return this.st.size(t,e,{target:s,maskVector:r}),this}get Width(){return this.element.getBoundingClientRect().width}get Height(){return this.element.getBoundingClientRect().height}get Top(){return this.element.getBoundingClientRect().top}get Right(){return this.element.getBoundingClientRect().right}get Bottom(){return this.element.getBoundingClientRect().bottom}get Left(){return this.element.getBoundingClientRect().left}freeze(t){return this.cache.isFrozzen=t,this}at(t){return this.items.at(t)}maintain(){for(let t=0;t<this.items.length;t++)Object.assign(this,{[[t]]:this.items[t]});return this.length=this.items.length,this}setTarget(t){return t instanceof Ge&&(t=t.element),this.remove(),this.target=t,this.render(),this}render(t=!0,e=this.target){return e instanceof Ge&&(e=e.element),this.target=e,t?this.target.appendChild(this.element):this.remove(),this}append(...t){if(this.cache.isFrozzen)return console.warn("You can't append new item to frozzen element"),this;for(let e=0;e<t.length;e++)["number","string"].includes(typeof t[e])&&(t[e]=Je(t[e])),t[e]instanceof Ge?(t[e].parent=this,this.element.appendChild(t[e].element),t[e].Target=this.element,this.items.push(t[e])):t[e]instanceof Object&&(t[e]?.style&&this.style(t[e]?.style),t[e]?.attr&&Object.entries(t[e].attr).forEach((t=>this.setAttr(""+t[0],t[1]))));return this.maintain(),this}remove(...t){if(0==t.length)this.target.children.length&&[...this.target.children].includes(this.element)&&this.target.removeChild(this.element);else{const e=t=>{"number"==typeof t&&(t=this.items[t]),t instanceof Ge&&this.element.removeChild(t.element),this.items=this.items.filter((e=>e!==t))};for(let s=0;s<t.length;s++)e(t[s]);for(let t=0;t<this.items.length;t++)Object.assign(this,{[[t]]:this.items[t]})}return this}removeAfter(t=1){return setTimeout((()=>this.remove()),t),this}removeItem(...t){const e=t=>{t instanceof Ge?this.element.removeChild(t.element):"number"==typeof t&&this.element.removeChild(this.element.children[t])};for(let s=0;s<t.length;s++)e(t[s]);for(let t=0;t<this.items.length;t++)Object.assign(this,{[[t]]:this.items[t]});return this}insertAt(t,...e){if(t>=this.element.children.length)this.append(...e);else for(let s=0;s<e.length;s++)["number","string"].includes(typeof e[s])&&(e[s]=Je(e[s])),this.element.insertBefore(e[s].element,this.items[t].element),this.items.splice(t,0,e[s]);return this}setAttr(t,e){return this.element.setAttribute(t,e),Object.assign(this.cache.attributes,Object.fromEntries([[t,e]])),this}removeAttr(t){return this.element.removeAttribute(t),this}setContentEditable(t=!0){return this.setAttr("contenteditable",t),this}get children(){return[...this.element.children]}get cloneElement(){return this.element.cloneNode(!0)}setClasses(...t){return this.setAttr("class",t.join(" ")),this}get Classes(){const t=this.element.getAttribute("class");return null===t?[]:t.split(" ")}addClass(){}setId(t){return this.element.setAttribute("id",t),this}get Id(){return this.element.getAttribute("id")}useTheme(t){}forEach(t){return this.items.forEach(t),this}filter(t,e,s){return this.items.filter(t).forEach(e),this}filterByTextContent(t,e=!1){return this.items.map((t=>t.render())),this.items.filter((s=>{const r=s.element.textContent;return!(e?r===t:r.includes(t))})).map((t=>t.render(!1))),this}filterByClass(t){return this.items.map((t=>t.render())),this.items.filter((e=>!e.Classes.includes(t))).map((t=>t.render(!1))),this}sortByTextContent(t,e){let s=this.children;return s.filter((e=>!e.textContent.toLowerCase().includes(t.toLowerCase()))).map((t=>{t.style.display="none"})),s.filter((e=>e.textContent.toLowerCase().includes(t.toLowerCase()))).map(((t,s)=>t.style.display=e[s])),s.filter((t=>"none"!=t.style.display)),this}onPtrMove(...t){return this.events.ptr||(this.events.ptr=ue(this)),this.events.ptr.onMove(...t),this}onPtrDown(...t){return this.events.ptr||(this.events.ptr=ue(this)),this.events.ptr.onDown(...t),this}onPtrUp(...t){return this.events.ptr||(this.events.ptr=ue(this)),this.events.ptr.onUp(...t),this}onPtrEnter(...t){return this.events.ptr||(this.events.ptr=ue(this)),this.events.ptr.onEnter(...t),this}onPtrLeave(...t){return this.events.ptr||(this.events.ptr=ue(this)),this.events.ptr.onLeave(...t),this}onPtrOut(...t){return this.events.ptr||(this.events.ptr=ue(this)),this.events.ptr.onOut(...t),this}onKeyDown(...t){return this.events.key||(this.events.key=ge(this)),this.events.key.onDown(...t),this}onKeyPress(...t){return this.events.key||(this.events.key=ge(this)),this.events.key.onPress(...t),this}onKeyUp(...t){return this.events.key||(this.events.key=ge(this)),this.events.key.onUp(...t),this}onKeysDown({keys:t=[],callback:e}={}){return this.events.key||(this.events.key=ge(this)),this.events.key.handleSuccessifKeys({keys:t,callback:e}),this}onDragStart(...t){return this.events.drag||(this.events.drag=Ee(this)),this.events.drag.onStart(...t),this}onDrag(...t){return this.events.drag||(this.events.drag=Ee(this)),this.events.drag.onDrag(...t),this}onDragEnd(...t){return this.events.drag||(this.events.drag=Ee(this)),this.events.drag.onEnd(...t),this}onDrop(...t){return this.events.drop||(this.events.drop=Ae(this)),this.events.drop.onDrop(...t),this}onClick(...t){return this.events.click||(this.events.click=_e(this)),this.events.click.onClick(...t),this}onDbClick(...t){return this.events.click||(this.events.click=_e(this)),this.events.click.onDbClick(...t),this}onCopy(...t){return this.events.clipboard||(this.events.clipboard=De(this)),this.events.clipboard.onCopy(...t),this}onCut(...t){return this.events.clipboard||(this.events.clipboard=De(this)),this.events.clipboard.onCut(...t),this}onPaste(...t){return this.events.clipboard||(this.events.clipboard=De(this)),this.events.clipboard.onPaste(...t),this}onSelect(...t){return this.events.clipboard||(this.events.clipboard=De(this)),this.events.clipboard.onSelect(...t),this}onFocus(...t){return this.events.focus||(this.events.focus=Le(this)),this.events.focus.onFocus(...t),this}onBlur(...t){return this.events.focus||(this.events.focus=Le(this)),this.events.focus.onFocus(...t),this}on(t,...e){return this.events.custom||(this.events.custom=qe(this)),this.events.custom.on(t,...e),this}emit(t,e={}){return this.events.custom||(this.events.custom=qe(this)),this.events.custom.emit(t,e),this}WatchAttributes(){}WatchChildren(){}WatchSize(t){return this.observer.resize||(this.observer.resize=((t,e)=>new Ze(t,e))(this,t)),this.observer.resize.start(),this}WatchIntersection(t,e){return this.observer.intersection||(this.observer.intersection=((t,e,s)=>new Ye(t,e,s))(this,t,e)),this.observer.intersection.start(),this}get VisibleArea(){let t=this.element.getBoundingClientRect(),e=globalThis.document.documentElement.clientHeight,s=globalThis.document.documentElement.clientWidth,r=t.top>0&&t.top<e,n=t.bottom<e&&t.bottom>0,i=t.left>0&&t.left<s,a=t.right>0&&t.right<s;return{top:r,bottom:n,left:i,right:a,heightRatio:(t.height+t.y)/t.height,isVisible:r||n||a||i}}setFullScreen(t=!0,e){return this.element.requestFullscreen?(t?this.element.requestFullscreen(e):globalThis.document.exitFullscreen(),this):(console.error("Fullscreen API is not supported in this browser."),this)}toggleFullScreen(t){return globalThis.document.fullscreenElement?globalThis.document.exitFullscreen():this.element.requestFullscreen(t),this}}const Qe={text:[],p:[],pre:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],br:[],hr:[],btn:[],ol:[],ul:[],image:[],video:[],audio:[],Article:[],Main:[],Section:[],Aside:[],Nav:[],Header:[],Footer:[],Flex:[],FlexMain:[],FlexNav:[],FlexHeader:[],FlexFooter:[],FlexSection:[],FLexArticle:[],FlexAside:[],Table:[],Svg:[],Canvas:[]};class Ke extends Ge{constructor(...t){super(),this.element=document.createElement("span"),this.text="",this.addValue(...t),this.st.display("inline-block"),this.render()}clear(){return this.element.textContent="",this}get value(){return this.element.textContent}setValue(t="",e=!1){["string","number"].includes(typeof t)&&(this.text=""+t,this.text.includes("\n")&&(this.text=this.text.split("\n").map((t=>"<span>".concat(t,"</span></br>"))).join(""))),t instanceof s&&(this.text=""+t.UI()),e?this.element.innerHTML+=this.text:this.element.innerHTML=this.text,(t instanceof Array||t instanceof Set)&&(t instanceof Set&&(t=[...t]),this.addValue(...t))}addValue(...t){return t.map((t=>{this.setValue(" ",!0),this.setValue(t,!0)})),this}toggleValues(...t){let e=(t=t.map((t=>""+t))).indexOf(""+this.value);return-1!=e&&e!=t.length-1?this.setValue(t[e+1]):this.setValue(t[0]),this}}const Je=(...t)=>{const e=new Ke(...t);return Qe.text.push(e),e.cache.order=Qe.text.length,e};class ts extends Ge{constructor(...t){super(),this.element=document.createElement("p"),this.addValue(...t),this.style({margin:0,padding:0}),this.render()}addValue(...t){for(let e=0;e<t.length;e++)"string"==typeof t[e]||"number"==typeof t[e]?(this.element.appendChild(document.createTextNode(t[e])),this.element.appendChild(document.createElement("br"))):t[e]instanceof Ge?this.element.appendChild(t[e].element):t[e]instanceof s&&Je(t.a+" + "+t.b+"i");return this}clear(){return this.element.childNodes.forEach((t=>t.remove())),this}setValue(...t){return this.clear(),this.addValue(...t),this}}const es=(...t)=>{const e=(new ts).append(...t);return Qe.p.push(e),e.cache.order=Qe.p.length,e};class ss extends Ge{constructor(t=1,e=""){super(),this.element=document.createElement("h"+t),this.element.textContent=e,this.render()}get value(){return this.element.innerText}setValue(t=""){this.element.innerText=t}addValue(t=""){return this.element.innerText+=t,this}}const rs=(t="")=>{const e=new ss(1,t);return Qe.h1.push(e),e.cache.order=Qe.text.length,e},ns=(t="")=>{const e=new ss(2,t);return Qe.h2.push(e),e.cache.order=Qe.text.length,e},is=(t="")=>{const e=new ss(3,t);return Qe.h3.push(e),e.cache.order=Qe.text.length,e},as=(t="")=>{const e=new ss(4,t);return Qe.h4.push(e),e.cache.order=Qe.text.length,e},os=(t="")=>{const e=new ss(5,t);return Qe.h5.push(e),e.cache.order=Qe.text.length,e},hs=(t="")=>{const e=new ss(6,t);return Qe.h6.push(e),e.cache.order=Qe.text.length,e};class ls extends Ge{constructor(t){super(t),this.render()}}class cs extends Ge{constructor(){super(),this.element=document.createElement("br"),this.render(),delete this.append}}class us extends Ge{constructor(){super(),this.element=document.createElement("hr"),this.render(),delete this.append}}class ms extends Ge{constructor(t){super(),this.element=document.createElement("a"),this.setHref(t),this.render()}setHref(t){this.element.href=t}}const ps=()=>new cs,ds=()=>new us,fs=(t=1)=>new Array(t).fill(new cs),gs=(t=1)=>new Array(t).fill(new us),bs=(t,...e)=>new ms(t).append(...e),ys=(t,...e)=>new ls(t).append(...e);class xs extends Ge{constructor(t){super(),this.element=document.createElement("li"),this.append(t),this.render()}}class ws extends Ge{constructor(){super(),delete this.append}append(...t){for(let e=0;e<t.length;e++){let s=null;["string","number"].includes(typeof t[e])&&(t[e]=Je(t[e])),t[e]instanceof Ge&&(s=new xs(t[e])),s.setTarget(this.element),this.items.push(s[0]),this.maintain()}}remove(...t){if(0==t.length)this.Target.children.length&&this.Target.removeChild(this.element);else{const e=t=>{"number"==typeof t&&(t=this.items[t]),t instanceof Ge&&this.element.removeChild(t.parent.element),this.items=this.items.filter((e=>e!==t))};for(let s=0;s<t.length;s++)e(t[s]);for(let t=0;t<this.items.length;t++)Object.assign(this,{[[t]]:this.items[t]})}return this}insertAt(t,...e){if(t>=this.element.children.length)this.append(...e);else for(let s=0;s<e.length;s++){let r=null;["number","string"].includes(typeof e[s])&&(e[s]=Je(e[s])),e[s]instanceof Ge&&(r=new xs(e[s])),this.element.insertBefore(r.element,this.items[t].parent.element),this.items.splice(t,0,e[s][0])}return this}filterByTextContent(t,e=!1){return this.items.map((t=>t.parent.render())),this.items.filter((s=>{const r=s.element.textContent;return!(e?r===t:r.includes(t))})).map((t=>t.parent.render(!1))),this}sortByTextContent(t=1){return this.items.map((t=>t.parent.render(!1))),this.sortedItems=this.items.sort(((e,s)=>t*e.element.textContent.localeCompare(s.element.textContent))),this.append(...this.sortedItems),this}filterByClass(t){return this.items.map((t=>t.parent.render(!0))),this.items.filter((e=>!e.Classes.includes(t))).map((t=>t.parent.render(!1))),this}delete(t){return[...this.element.children].indexOf(t)}push(){}pop(){}unshift(){}shift(){}sort(){}filter(){}slice(){}}class vs extends ws{constructor(...t){super(),this.element=document.createElement("ol"),this.append(...t),this.render()}type(t=1){return this.element.setAttribute("type",t),this}start(t=1){return this.element.setAttribute("start",t),this}}class ks extends ws{constructor(...t){super(),this.element=document.createElement("ul"),this.append(...t),this.render()}}const Es=(...t)=>new vs(...t),As=(...t)=>new ks(...t);class Ms extends Ge{constructor(t="button"){super(),this.element=document.createElement("button"),this.setValue(t),this.render(),this.st.cursor("pointer")}setValue(t){return t instanceof Ge?t.setTarget(this.element):(this.element.appendChild(document.createTextNode("")),this.element.childNodes[0].data=t),this}get value(){return this.element.innerText}toggleValues(...t){let e=(t=t.map((t=>""+t))).indexOf(""+this.value);return-1!=e&&e!=t.length-1?this.setValue(t[e+1]):this.setValue(t[0]),this}}const Cs=t=>new Ms(t);class Ts extends Ge{constructor(t=""){super(),this.element=document.createElement("option"),t instanceof Object&&"value"in t?(this.setValue(t.value),this.setText(t?.text??t.value)):this.setValue(t)}setValue(t=""){return this.element.value=t,this}setText(t=""){return t&&(this.element.textContent=t),this}}class _s extends Ge{constructor(){super(),this.element=document.createElement("textarea"),this.render()}get value(){return this.element.textContent}}const Is=()=>new _s;class Os extends Ge{constructor(t="",e){super(),this.element=document.createElement("input"),Object.assign(this.events,{input:null}),this.setValue(t),e&&this.linkDatalist(e),this.render()}onInput(...t){return this.events.input||(this.events.input=Ue(this)),this.events.input.onInput(...t),this}onChange(...t){return this.events.input||(this.events.input=Ue(this)),this.events.input.onChange(...t),this}linkDatalist(t){let e;if(t instanceof $s)e=t.Id;else if(t instanceof Array){const s=new $s(...t);e=s.Id,console.log(s)}else e=t;return this.element.setAttribute("list",e),this}get value(){return this.element.value}_setType(t){return this.element.type=t,this}setValue(t=""){return this.element.value=t,this}useState(t){return this.setValue(t),[{value:this.value},t=>this.setValue(t)]}setPlaceholder(t){return t&&(this.element.placeholder=t),this}get isValide(){return this.element.checkValidity()}setRequired(t=!0){return this.element.required=t,this}select(){return this.element.select(),this}copy(){return this.element.select(),document.execCommand("copy"),this}cut(){return this.element.select(),document.execCommand("cut"),this}accept(t){return this.element.accept=t,this}}class Ss extends Os{constructor(){super(),this._setType("search"),this.Length=0}onsearch(t){return this.element.addEventListener("search",(()=>t())),this}connect(...t){return this}displayLength(t){return this.element.addEventListener("keyup",(()=>t.setValue(this.Length))),this}}class Vs extends Os{constructor(t,e,s=1){super(),this._setType("number"),this.setMin(t).setMax(e).setStep(s),this.render()}get value(){return+this.element.value}setMin(t){return this.element.min=t,this}setMax(t){return this.element.max=t,this}setStep(t){return this.element.step=t,this}}class js extends Vs{constructor(t=0,e=0,s=10,r=1){super(),this._setType("range"),this.setMin(e).setMax(s).setValue(t).setStep(r),this.render()}}class Ds extends Os{constructor(){super(),this._setType("color"),this.background(this.value),this.render(),this.onInput((()=>this.background(this.value)))}}class Rs extends Os{constructor(){super(),this._setType("password"),this.render()}}class Ps extends Os{constructor(){super(),this._setType("email"),this.render()}}class Fs extends Os{constructor(){super(),this._setType("time"),this.render()}}class Ls extends Os{constructor(){super(),this._setType("date"),this.render()}}class Ns extends Os{constructor(){super(),this._setType("datetime-local"),this.render()}}class zs extends Os{constructor(){super(),this._setType("checkbox"),this.cursor("pointer")}get checked(){return this.element.checked}check(t=!0){return this.element.checked=t,this}color(t){return this.element.style.accentColor=t,this}}class Bs extends Os{constructor(){super(),this._setType("radio"),this.cursor("pointer")}get checked(){return this.element.checked}check(t=!0){return this.element.checked=t,this}color(t){return this.element.style.accentColor=t,this}}class Us extends Ge{constructor(t="File"){super(),this._aux_element=Cs(t).setTarget(this.Target),this.element=document.createElement("input"),this.element.setAttribute("type","file"),this.element.setAttribute("accept","image"),this._aux_element.onClick((()=>this.element.click())),this.element.onChange=this.handleImage.bind(this)}handleImage(t){const e=new FileReader,s=new Image;e.onload=function(t){s.src=t.target.result,console.log(s.src)},e.readAsDataURL(t.target.files[0]),this.img=s}get value(){return this.img}render(t=!0){return t?this.Target.appendChild(this._aux_element.element):this.remove(),this}remove(){return this.Target.children.length&&this.Target.removeChild(this._aux_element.element),this}}class $s extends Ge{constructor(...t){super(),this.element=document.createElement("datalist"),this.addOptions(...t).setId("ziko-datalist-id"+J.string(10)),this.render()}addOptions(...t){return t.map((t=>this.append(new Ts(t)))),this}}const Hs=(t,e)=>{if(t instanceof Object){const{datalist:e,placeholder:s}=t;return t=t.value??"",new Os(t,e).setPlaceholder(s)}return new Os(t,e)},qs=(...t)=>new $s(...t),Ws=(t,e,s,r)=>{if(t instanceof Object){const{min:e=0,max:s=10,step:r=1}=t;return new js(t=t?.value??5,e,s,r)}return new js(t,e,s,r)},Xs=(t,e,s)=>{if(t instanceof Object){const{value:e,max:s=10,step:r=1,placeholder:n=""}=t;return new js(t=t?.min??0,s,r).setValue(e).setPlaceholder(n)}return new Vs(t,e,s)},Ys=(...t)=>(new Ss).connect(...t),Zs=t=>new Us(t),Gs=()=>new Rs,Qs=()=>new Ps,Ks=()=>new Ds,Js=()=>new Fs,tr=()=>new Ls,er=()=>new Ns,sr=()=>new zs,rr=()=>new Bs;class nr extends Ge{constructor(){super(),this.element=document.createElement("select"),this.render()}addOptions(...t){return t.map((t=>this.append(new Ts(t)))),this}}const ir=()=>new nr;class ar extends Ge{constructor(t="",e="100%",s="50vh"){super(),this.element=document.createElement("video"),"VIDEO"===t.nodeName?this.element.setAttribute("src",t.src):this.element.setAttribute("src",t),"number"==typeof e&&(e+="%"),"number"==typeof s&&(s+="%"),this.style({width:e,height:s}),this.render()}controls(t=!0){return this.element.controls=t,this}play(){return this.element.play(),this}pause(){return this.element.pause(),this}poster(t=""){return this.element.poster=t,this}PIP(t){return this.element.requestPictureInPicture(t),this}}class or extends ar{constructor(){super(),this.element.setAttribute("src",""),this.constraints={audio:!0,video:{width:1280,height:720}}}start(){return navigator.mediaDevices.getUserMedia(this.constraints).then((t=>{this.element.srcObject=t,this.element.onloadedmetadata=()=>{this.element.play()}})).catch((function(t){console.log(t.name+": "+t.message)})),this}}const hr=()=>new or;class lr extends Ge{constructor(t,e,s){super(),this.element=document.createElement("img"),this.value=t,"IMG"===t.nodeName?this.element.setAttribute("src",t.src):this.element.setAttribute("src",t),"number"==typeof e&&(e+="%"),"number"==typeof s&&(s+="%"),this.style({border:"1px solid black",width:e,height:s}),this.render()}updateSrc(t){return this.value=t,this.element.src=t,this}toggleSrc(...t){let e=(t=t.map((t=>""+t))).indexOf(""+this.value);return-1!=e&&e!=t.length-1?this.updateSrc(t[e+1]):this.updateSrc(t[0]),this}alt(t){return this.element.alt=t,this}}class cr extends Ge{constructor(t){super(),this.element=document.createElement("audio"),this.element.setAttribute("src",t),this.render(),this.controls()}controls(t=!0){return this.element.controls=t,this}play(){return this.element.play(),this}pause(){return this.element.pause(),this}}class ur extends Ge{constructor(t,e){super(),this.element=document.createElement("figure"),this.img=t.width("100%").element,this.caption=document.createElement("figcaption"),this.caption.append(e.element),this.element.append(this.img),this.element.append(this.caption),this.render()}}const mr=(t,e,s)=>new lr(t,e,s),pr=t=>new cr(t),dr=(t,e)=>new ur(t,e),fr=(t,e,s)=>new ar(t,e,s);function gr(t){return 1==t?this.style({flexDirection:"column"}):-1==t&&this.style({flexDirection:"column-reverse"}),this}function br(t){return 1==t?this.style({flexDirection:"row"}):-1==t&&this.style({flexDirection:"row-reverse"}),this}function yr(t){return"number"==typeof t&&(t=["flex-start","center","flex-end"][t+1]),t}function xr(t){return yr(-t)}class wr extends Ge{constructor(t="div",e="100%",s="100%"){super(),this.element=document.createElement(t),this.direction="cols","number"==typeof e&&(e+="%"),"number"==typeof s&&(s+="%"),this.style({width:e,height:s}),this.style({display:"flex"}),this.render()}resp(t,e=!0){return this.wrap(e),this.element.clientWidth<t?this.vertical():this.horizontal(),this}setSpaceAround(){return this.style({justifyContent:"space-around"}),this}setSpaceBetween(){return this.style({justifyContent:"space-between"}),this}setBaseline(){return this.style({alignItems:"baseline"}),this}gap(t){return"row"===this.direction?this.style({columnGap:t}):"column"===this.direction&&this.style({rowGap:t}),this}wrap(t="wrap"){return this.style({flexWrap:"string"==typeof t?t:["no-wrap","wrap","wrap-reverse"][+t]}),this}_justifyContent(t="center"){return this.style({justifyContent:t}),this}vertical(t,e,s=1){return gr.call(this,s),this.style({alignItems:"number"==typeof t?yr.call(this,t):t,justifyContent:"number"==typeof e?xr.call(this,e):e}),this}horizontal(t,e,s=1){return br.call(this,s),this.style({alignItems:"number"==typeof e?xr.call(this,e):e,justifyContent:"number"==typeof t?yr.call(this,t):t}),this}show(){return this.isHidden=!1,this.style({display:"flex"}),this}}const vr=(...t)=>{let e="div";return"string"==typeof t[0]&&(e=t[0],t.pop()),new wr(e).append(...t)};class kr extends Ge{constructor(t="div",e="50vw",s="50vh"){super(),this.element=document.createElement(t),this.direction="cols","number"==typeof e&&(e+="%"),"number"==typeof s&&(s+="%"),this.style({border:"1px solid black",width:e,height:s}),this.style({display:"grid"}),this.render()}columns(t){let e="";for(let s=0;s<t;s++)e=e.concat(" auto");return this.#a(e),this}#a(t="auto auto"){return this.style({gridTemplateColumns:t}),this}gap(t=10,e=t){return"number"==typeof t&&(t+="px"),"number"==typeof e&&(e+="px"),this.style({gridColumnGap:t,gridRowGap:e}),this}}const Er=(...t)=>new kr("div").append(...t);class Ar extends wr{constructor(...t){super(),this.style({position:"relative",overflow:"hidden",touchAction:"none",userSelect:"none"}),this.horizontal("space-around",0),this.track=Section(...t).style({display:"inline-flex"}),this.track.size(100*this.track.children.length+"vw"),this.track.setTarget(this),this.track.items.map((t=>t.style({pointerEvents:"none",margin:"auto 10px"}))),this.x0=null,this.tx=0,this.onPtrMove((t=>{if(t.isDown){let e=t.event.pageX-this.x0;this.track.translateX(this.tx+e,0)}})),this.onPtrDown((t=>{console.log(t.event),this.x0=t.event.pageX;const e=window.getComputedStyle(this.track.element).getPropertyValue("transform");"none"!==e&&(this.tx=+e.split(",")[4])})),this.onPtrUp((t=>console.log(t.isDown))),this.onPtrLeave((t=>{}))}}const Mr=(...t)=>new Ar(...t);class Cr extends wr{constructor(){super()}addSection(){const t=Section().style({width:"80%",height:"50px",margin:"5px 0px",border:"1px red solid"});return this.append(t),this}}const Tr=()=>new Cr;class _r extends wr{#o=0;constructor(t,e){super(),this.style({boxSizing:"border-box",backgroundColor:"blanchedalmond",border:"1px red solid",margin:"30px"}),this.append(vr().size("auto","auto").style({boxSizing:"border-box",justifyContent:"center",alignItems:"center",textAlign:"center",minWidth:"50px",minHeight:"50px",backgroundColor:"darkblue",border:"1px darkblue solid"}),vr().style({boxSizing:"border-box",justifyContent:"center",alignItems:"center",textAlign:"center",width:"100%",height:"100%",backgroundColor:"darkslategrey"})),this.Controller=this.items[0].setAttribute("role","tablist"),this.Content=this.items[1],t.length!==e.length?console.error(""):(this.Controller.append(...t),this.Content.append(...e)),this.init(),this.display(0)}init(){for(let t=0;t<this.Controller.length;t++)this.Controller[t].setAttribute("role","tab").setAttribute("aria-controls",`tab${t}`),this.Content[t].setAttribute("role","tabpanel").setAttribute("aria-labelledby",`tab${t}`).setAttribute("tabindex",-1);return this.Controller.forEach((t=>t.onClick((t=>{const e=t.Target.element.getAttribute("aria-controls"),s=+e.slice(3);this.Content.filter((t=>t.element.getAttribute("aria-labelledby")===e),(()=>{this.#o!==s&&this.display(s)}))})))),this}addPairs(t,e){this.Controller.append(t),this.Content.append(e);const s=this.Controller.length;return this.Controller.at(-1).setAttribute("role","tab").setAttribute("aria-controls","tab"+(s-1)),this.Content.at(-1).setAttribute("role","tabpanel").setAttribute("aria-labelledby","tab"+(s-1)).setAttribute("tabindex",-1),this}removePairs(t){}display(t){return this.#o=t%this.Content.length,this.Controller.forEach((t=>t.setAttribute("tabindex",-1).setAttribute("aria-selected",!1))),this.Controller.at(this.#o).setAttribute("tabindex",0).setAttribute("aria-selected",!0),(async()=>{await this.Content.forEach((t=>t.hide())),await this.Content.at(this.#o).setAttribute("tabindex",0).show()})(),this}next(t=1){return this.display(this.#o+t),this}previous(t=1){return this.display(this.#o-t),this}useHorizontalSwippe(){return this.onPtrDown(),this.onPtrUp((t=>this.next(Math.sign(t.swippe.delta_x)))),this}useVerticalSwippe(){return this.onPtrDown(),this.onPtrUp((t=>this.next(Math.sign(t.swippe.delta_y)))),this}}const Ir=(t,e)=>new _r(t,e);class Or extends Ge{constructor(t,e,s=""){super(),this.element=document.createElement("details"),this.summary=ys("summary",t).style({fontSize:"1.1em",padding:"0.625rem",fontWeight:"bold",listStyleType:`"${s}"`,cursor:"pointer"}),this.summary[0].style({marginLeft:"0.5em"}),this.content=e.style({margin:"0.7em"}),this.append(this.summary,this.content),this.style({marginBottom:"0.7em"}),this.render()}get isOpen(){return this.element.open}open(){return this.element.open=!0,this}onOpen(t){return this}close(){return this.element.open=!0,this}onClose(t){return this}toggle(){return this.element.open=!this.element.open,this}}const Sr=(t,e,s)=>new Or(t,e,s);class Vr extends Ge{constructor(){super(),this.element=document.createElement("main"),this.render()}}class jr extends Ge{constructor(){super(),this.element=document.createElement("header"),this.render()}}class Dr extends Ge{constructor(){super(),this.element=document.createElement("nav"),this.render()}}class Rr extends Ge{constructor(){super(),this.element=document.createElement("section"),this.style({position:"relative"}),this.render()}}class Pr extends Ge{constructor(){super(),this.element=document.createElement("article"),this.render()}}class Fr extends Ge{constructor(){super(),this.element=document.createElement("aside"),this.render()}}class Lr extends Ge{constructor(){super(),this.element=document.createElement("footer"),this.render()}}const Nr=(...t)=>(new Rr).append(...t),zr=(...t)=>(new Pr).append(...t),Br=(...t)=>(new Vr).append(...t),Ur=(...t)=>(new jr).append(...t),$r=(...t)=>(new Lr).append(...t),Hr=(...t)=>(new Dr).append(...t),qr=(...t)=>(new Fr).append(...t);class Wr extends Ge{constructor(...t){super(),this.element=document.createElement("Tr"),this.append(...t)}}class Xr extends Ge{constructor(...t){super(),this.element=document.createElement("Td"),this.append(...t)}}class Yr extends Ge{constructor(...t){super(),this.element=document.createElement("Thead"),this.append(...t)}}class Zr extends Ge{constructor(...t){super(),this.element=document.createElement("Tbody"),this.append(...t)}}class Gr extends Ge{constructor(t){super(),this.element=document.createElement("Caption"),this.append(t)}}const Qr=(...t)=>(t=t.map((t=>(t instanceof Ge||(t=Je(t)),t))),new Xr(...t)),Kr=t=>new Gr(t),Jr=t=>{var e=new Array(t.rows).fill(null).map((()=>((...t)=>new Wr(...t))())),s=t.arr.map((t=>t.map((()=>null))));for(let r=0;r<s.length;r++)for(let n=0;n<s[0].length;n++)s[r][n]=Qr(t.arr[r][n]),e[r].append(s[r][n]);return e};class tn extends Ge{constructor(t,{caption:e=null,head:s=null,foot:r=null}={}){super(),this.element=document.createElement("table"),this.structure={caption:e,head:s,body:null,foot:r},t&&this.fromMatrix(t),e&&this.setCaption(e),this.render()}get caption(){return this.structure.caption}get header(){}get body(){}get footer(){}setCaption(t){return this.removeCaption(),this.structure.caption=Kr(t),this.append(this.structure.caption),this}removeCaption(){return this.structure.caption&&this.removeItem(...this.items.filter((t=>t instanceof Gr))),this.structure.caption=null,this}setHeader(...t){return this.tHead=((...t)=>(t=t.map((t=>(t instanceof Ge||(t=Qr(t)),t))),new Yr(...UI)))(...t),this.append(this.tHead),this}removeHeader(){return this.removeItem(...this.items.filter((t=>t instanceof Gr))),this}setFooter(t){return this.structure.caption=Kr(t),this.append(this.structure.caption),this}removeFooter(){return this.removeItem(...this.items.filter((t=>t instanceof Gr))),this}fromMatrix(t){return this.bodyMatrix=t instanceof Array?ot(t):t,this.structure.body&&this.remove(this.structure.body),this.structure.body=((...t)=>new Zr(...t))(),this.append(this.structure.body),this.structure.body.append(...Jr(this.bodyMatrix)),this}transpose(){return this.fromMatrix(this.bodyMatrix.T),this}hstack(t){return t instanceof tn&&(t=t.bodyMatrix),this.fromMatrix(this.bodyMatrix.clone.hstack(t)),this}vstack(t){return t instanceof tn&&(t=t.bodyMatrix),this.fromMatrix(this.bodyMatrix.clone.vstack(t)),this}slice(t=0,e=0,s=this.bodyMatrix.rows-1,r=this.bodyMatrix.cols-1){return this.fromMatrix(this.bodyMatrix.slice(t,e,s,r)),this}sortByCols(t,e={type:"num",order:"asc"}){return this.fromMatrix(this.bodyMatrix.clone.sortTable(t,e)),this}sortByRows(t,e={type:"num",order:"asc"}){return this.fromMatrix(this.bodyMatrix.T.clone.sortTable(t,e).T),this}filterByRows(t){return this.fromMatrix(this.bodyMatrix.clone.filterByRows(t)),this}filterByCols(t){return this.fromMatrix(this.bodyMatrix.clone.filterByCols(t)),this}forEachRow(t){return this.structure.body.forEach(t),this}forEachItem(t){return this.structure.body.forEach((e=>e.forEach(t))),this}}const en=(t,e)=>new tn(t,e),sn={ZikoHtml:ys,text:Je,p:es,h1:rs,h2:ns,h3:is,h4:as,h5:os,h6:hs,btn:Cs,br:ps,hr:ds,brs:fs,hrs:gs,link:bs,ol:Es,ul:As,input:Hs,search:Ys,slider:Ws,checkbox:sr,radio:rr,datalist:qs,inputNumber:Xs,inputColor:Ks,inputDate:tr,inputDateTime:er,inputEmail:Qs,inputImage:Zs,inputPassword:Gs,inputTime:Js,select:ir,textarea:Is,inputCamera:hr,image:mr,video:fr,audio:pr,figure:dr,Flex:vr,Carousel:Mr,Grid:Er,Header:Ur,Main:Br,Section:Nr,Article:zr,Aside:qr,Nav:Hr,Footer:$r,Table:en,CodeNote:Tr,Tabs:Ir,Accordion:Sr,ExtractAll:function(){const t=Object.keys(this);for(let e=0;e<t.length;e++){const s=t[e];"ExtractAll"!==s&&"RemoveAll"!==s&&(globalThis[s]=this[s])}return this},RemoveAll:function(){const t=Object.keys(this);for(let e=0;e<t.length;e++){const s=t[e];"RemoveAll"!==s&&delete globalThis[s]}return this}};class rn{constructor(t,{fps:e,step:s,t:r=[0,null],start:n=!0}={}){this.callback=t,this.cache={isRunning:!1,AnimationId:null,startTime:null,step:s,fps:e,t:r,started:n},this.adjust(),this.i=0}adjust(){if(this.cache.step&&this.cache.fps&&(console.warn(`Fps will be adjusted from ${this.cache.fps} to ${1e3/this.cache.step} to ensure a smoother animation`),this.cache.fps=1e3/this.cache.step),this.cache.started){const t=this.cache.t;t[0]?this.startAfter(t[0]):this.start(),t[1]&&this.stopAfter(t[1])}return this}get TIME_STEP(){return this.cache.step?this.cache.step:1e3/this.cache.fps}start(){return this.cache.isRunning||(this.i=0,this.cache.isRunning=!0,this.cache.startTime=Date.now(),this.animate()),this}pause(){return this.cache.isRunning&&(clearTimeout(this.cache.AnimationId),this.cache.isRunning=!1),this}stop(){return this.pause(),this.i=0,this}resume(){return this.cache.isRunning=!0,this.animate(),this}startAfter(t=1e3){return setTimeout(this.start.bind(this),t),this}stopAfter(t=1e3){return setTimeout(this.stop.bind(this),t),this}animate=()=>{if(this.cache.isRunning){const t=Date.now(),e=t-this.cache.startTime;e>this.TIME_STEP&&(this.callback(this),this.i++,this.cache.startTime=t-e%this.TIME_STEP),this.cache.AnimationId=setTimeout(this.animate,0)}}}const nn=(t,e)=>new rn(t,e),an={Linear:function(t){return t},InSin:t=>1-Math.cos(t*Math.PI/2),OutSin:t=>Math.sin(t*Math.PI/2),InOutSin:t=>-(Math.cos(Math.PI*t)-1)/2,InQuad:t=>t**2,OutQuad:t=>1-Math.pow(1-t,2),InOutQuad:t=>t<.5?2*Math.pow(t,2):1-Math.pow(-2*t+2,2)/2,InCubic:t=>t**3,OutCubic:t=>1-Math.pow(1-t,3),InOutCubic:t=>t<.5?4*Math.pow(t,3):1-Math.pow(-2*t+2,3)/2,InQuart:t=>t**4,OutQuart:t=>1-Math.pow(1-t,4),InOutQuart:t=>t<.5?8*Math.pow(t,4):1-Math.pow(-2*t+2,4)/2,InQuint:t=>t**5,OutQuint:t=>1-Math.pow(1-t,5),InOutQuint:t=>t<.5?16*Math.pow(t,5):1-Math.pow(-2*t+2,5)/2,InExpo:t=>0===t?0:Math.pow(2,10*t-10),OutExpo:t=>1===t?1:1-Math.pow(2,-10*t),InOutExpo:t=>0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,InCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),OutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),InOutCic:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,Arc:t=>1-Math.sin(Math.acos(t)),Back:t=>Math.pow(t,2)*(2*t-1),Elastic:t=>-2*Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*t/3*t),InBack(t){const e=1.70158;return 2.70158*Math.pow(t,3)-e*t**2},OutBack(t){const e=1.70158;return 1+2.70158*Math.pow(t-1,3)+e*Math.pow(t-1,2)},InOutBack(t){const e=2.5949095;return t<.5?Math.pow(2*t,2)*(7.189819*t-e)/2:(Math.pow(2*t-2,2)*((e+1)*(2*t-2)+e)+2)/2},InElastic(t){const e=2*Math.PI/3;return 0===t?0:1===t?1:-Math.pow(2,10*t-10)*Math.sin((10*t-10.75)*e)},OutElastic(t){const e=2*Math.PI/3;return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*e)+1},InOutElastic(t){const e=2*Math.PI/4.5;return 0===t?0:1===t?1:t<.5?-Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*e)/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*e)/2+1},InBounce:t=>1-an.OutBounce(1-t),OutBounce(t){const e=7.5625,s=2.75;return t<1/s?e*t*t:t<2/s?e*(t-=1.5/s)*t+.75:t<2.5/s?e*(t-=2.25/s)*t+.9375:e*(t-=2.625/s)*t+.984375},InOutBounce:t=>t<.5?(1-an.OutBounce(1-2*t))/2:(1+an.OutBounce(2*t-1))/2},on=(t,e=1e3)=>(...s)=>setTimeout((()=>t(...s)),e),hn=(t,e)=>{let s=0;return(...r)=>{const n=(new Date).getTime();n-s<e||(s=n,t(...r))}},ln=t=>{const e=Date.now(),s=performance.memory.usedJSHeapSize,r=t();return{elapsedTime:Date.now()-e,usedMemory:performance.memory.usedJSHeapSize-s,result:r}},cn=t=>new Promise((e=>{if(t.element)return e(t.element);const s=new MutationObserver((()=>{t.element&&(e(t.element),s.disconnect())}));s.observe(document.body,{childList:!0,subtree:!0})})),un=(t,e=2e3)=>{const s=Date.now();for(;Date.now()-s<e;)if(t.element)return t.element},mn=t=>new Promise((e=>setTimeout(e,t))),pn=t=>{console.time("timeTaken");const e=t();return console.timeEnd("timeTaken"),e};class dn{constructor(t,{ease:e=an.Linear,step:s=50,t:r=[0,null],start:n=!0,duration:i=3e3}={}){this.cache={isRunning:!1,AnimationId:null,startTime:null,ease:e,step:s,intervall:r,started:n,duration:i},this.t=0,this.tx=0,this.ty=0,this.i=0,this.callback=t}#h(){this.t+=this.cache.step,this.i++,this.tx=St(this.t,0,this.cache.duration,0,1),this.ty=this.cache.ease(this.tx),this.callback(this),this.t>=this.cache.duration&&(clearInterval(this.cache.AnimationId),this.cache.isRunning=!1)}reset(t=!0){return this.t=0,this.tx=0,this.ty=0,this.i=0,t&&this.start(),this}#l(t=!0){return this.cache.isRunning||(t&&this.reset(!1),this.cache.isRunning=!0,this.cache.startTime=Date.now(),this.cache.AnimationId=setInterval(this.#h.bind(this),this.cache.step)),this}start(){return this.#l(!0),this}pause(){return this.cache.isRunning&&(clearTimeout(this.cache.AnimationId),this.cache.isRunning=!1),this}resume(){return this.#l(!1),this}stop(){return this.pause(),this.reset(!1),this}}const fn=(t,e)=>new dn(t,e),gn={wait:mn,timeTaken:pn,throttle:hn,debounce:on,Ease:an,time_memory_Taken:ln,loop:nn,animation:fn,waitForUIElm:cn,waitForUIElmSync:un,ExtractAll:function(){const t=Object.keys(this);for(let e=0;e<t.length;e++){const s=t[e];"ExtractAll"!==s&&"RemoveAll"!==s&&(globalThis[s]=this[s])}return this},RemoveAll:function(){const t=Object.keys(this);for(let e=0;e<t.length;e++){const s=t[e];"RemoveAll"!==s&&delete globalThis[s]}return this}},bn=t=>t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\[(.*?)\]\((.*?)\)/g,'<a href="$2">$1</a>').replace(/!\[(.*?)\]\((.*?)\)/g,'<img src="$2" alt="$1">'),yn=t=>`<tr>${t.split("|").map((t=>t.trim())).filter((t=>""!==t)).map((t=>`<td>${bn(t)}</td>`)).join("")}</tr>\n`,xn=(t,e)=>{const s=t.slice(1,-1).join("\n");return`<pre>${e?`<code data-language="${e}">${s}</code>`:`<code>${s}</code>`}</pre>\n`},wn=t=>{const e=t.match(/^\d+\.\s/);if(e){let s=+e[1];return`<ol${1===s?"":` start=${s}`}>\n<li>${bn(t.slice(e[0].length))}</li>\n</ol>\n`}return`<ul>\n<li>${bn(t)}</li>\n</ul>\n`},vn=t=>{const e=t.split("\n");let s="",r=!1,n=!1,i=[],a="";for(let t=0;t<e.length;t++){let o=e[t];if(o.startsWith("|"))r||(r=!0,s+="<table>\n"),s+=yn(o);else if(r&&(r=!1,s+="</table>\n"),o.startsWith("```"))n?(n=!1,s+=xn(i,a)):(n=!0,i=[],a=o.slice(3).trim());else if(n)i.push(o);else if(o.startsWith("# ")){const t=o.indexOf(" "),e=o.slice(t+1);s+=`<h${t}>${bn(e)}</h${t}>\n`}else o.startsWith("- ")||o.startsWith("* ")||o.match(/^\d+\.\s/)?s+=wn(o):s+=`<p>${bn(o)}</p>\n`}return s},kn=(t,e=",")=>t.trim().trimEnd().split("\n").map((t=>t.split(e))),En=(t,e=",")=>new at(kn(t,e)),An=(t,e=",")=>{const[s,...r]=kn(t,e);return r.map((t=>{const e={};return s.forEach(((s,r)=>{e[s]=t[r]})),e}))},Mn=(t,e=",")=>JSON.stringify(An(t,e)),Cn=(t,e)=>{const s=t.trim().trimEnd().split("\n").filter((t=>t));let r=`INSERT INTO ${e} (${s[0].split(",").join(", ")}) Values `,n=[];for(let t=1;t<s.length;t++){const e=s[t].split(",");n.push(`(${e})`)}return r+n.join(",\n")},Tn=t=>t instanceof Array?[Object.keys(t[0]),...t.map((t=>Object.values(t)))]:[Object.keys(t)],_n=(t,e)=>Tn(t).map((t=>t.join(e))).join("\n"),In=t=>Tn(t instanceof Object?t:JSON.parse(t)),On=(t,e=",")=>_n(t instanceof Object?t:JSON.parse(t),e),Sn=(t,e)=>{const s=On(t,e),r=new Blob([s],{type:"text/csv;charset=utf-8;"});return{str:s,blob:r,url:URL.createObjectURL(r)}},Vn=(t,e)=>{const s=[];if(Array.isArray(t))t.forEach((t=>{if("object"==typeof t&&null!==t){s.push(`${e}-`);const r=Vn(t,`${e}  `);s.push(...r)}else s.push(`${e}- ${t}`)}));else for(const r in t)if(t.hasOwnProperty(r)){const n=t[r];if("object"==typeof n&&null!==n){s.push(`${e}${r}:`);const t=Vn(n,`${e}  `);s.push(...t)}else s.push(`${e}${r}: ${n}`)}return s},jn=(t,e="")=>Vn(t,e).join("\n"),Dn=(t,e)=>jn(t instanceof Object?t:JSON.parse(t),e),Rn=(t,e)=>{const s=Dn(t,e),r=new Blob([s],{type:"text/yml;charset=utf-8;"});return{str:s,blob:r,url:URL.createObjectURL(r)}},Pn=(t,e=1)=>{let s="";for(const r in t)if(t.hasOwnProperty(r)){const n=t[r];s+="\n"+" ".repeat(e)+`<${r}>`,s+="object"==typeof n?Pn(n,e+2):`${n}`,s+=`</${r}>`}return s.trim()},Fn=(t,e)=>{const s=Pn(t,e),r=new Blob([s],{type:"text/xml;charset=utf-8;"});return{str:s,blob:r,url:URL.createObjectURL(r)}},Ln=t=>(new XMLSerializer).serializeToString(t),Nn=t=>btoa(Ln(t)),zn=t=>"data:image/svg+xml;base64,"+Nn(t),Bn=(t,e=!0)=>mr(zn(t)).render(e);function Un(t){const e={type:t.nodeName,attributes:{},children:[]};for(let s=0;s<t.attributes.length;s++){const r=t.attributes[s];e.attributes[r.name]=r.value}for(let s=0;s<t.childNodes.length;s++){const r=t.childNodes[s];r.nodeType===Node.ELEMENT_NODE?e.children.push(Un(r)):r.nodeType===Node.TEXT_NODE&&(e.text=r.textContent.trim())}return e}const $n=t=>{const e=new XMLHttpRequest;if(e.open("GET",t,!1),e.send(),200===e.status)return e.responseText;throw new Error(`Failed to fetch data from ${t}. Status: ${e.status}`)};globalThis.fetchdom=async function(t="https://github.com/zakarialaoui10"){const e=await fetch(t),s=await e.text();return(new DOMParser).parseFromString(s,"text/xml").documentElement},globalThis.fetchdomSync=function(t="https://github.com/zakarialaoui10"){const e=$n(t);return(new DOMParser).parseFromString(e,"text/xml").documentElement};const Hn={parseXML:function(t){return Un((new DOMParser).parseFromString(t,"text/xml").documentElement)},preload:$n,markdown2html:vn,csv2arr:kn,csv2matrix:En,csv2object:An,csv2json:Mn,csv2sql:Cn,json2arr:In,json2csv:On,json2csvFile:Sn,json2yml:Dn,json2ymlFile:Rn,json2xml:Pn,json2xmlFile:Fn,svg2str:Ln,svg2ascii:Nn,svg2imgUrl:zn,svg2img:Bn,ExtractAll:function(){const t=Object.keys(this);for(let e=0;e<t.length;e++){const s=t[e];"ExtractAll"!==s&&"RemoveAll"!==s&&(globalThis[s]=this[s])}return this},RemoveAll:function(){const t=Object.keys(this);for(let e=0;e<t.length;e++){const s=t[e];"RemoveAll"!==s&&delete globalThis[s]}return this}};class qn{color({stroke:t,fill:e}){return this.element.setAttribute("stroke",t),this.element.setAttribute("fill",e),this}fill(t="none"){return this.element.setAttribute("fill",t),this}stroke(t="none",e){return this.element.setAttribute("stroke",t),e&&this.strokeWidth(e),this}strokeWidth(t=1){return this.element.setAttribute("stroke-width",t),this}opacity(t=1){return this.element.setAttribute("opacity",t),this}}class Wn extends qn{constructor(t,e,s,r,n=!0){super(),this.element=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.setX(t).setY(e).width(s).height(r),this.rx=this.x+this.w/2,this.ty=this.y+this.h/2}setX(t){return this.element.x.baseVal.value=t,this.x=t,this}setY(t){return this.element.y.baseVal.value=t,this.y=t,this}r(t,e){return this.rx=t,this.ry=e,this.setX(this.rx-this.w/2),this.setY(this.ry-this.h/2),this}width(t){return this.element.width.baseVal.value=t,this.w=t,this}height(t){return this.element.height.baseVal.value=t,this.h=t,this}}const Xn=(t,e,s,r,n)=>new Wn(t,e,s,r,n);class Yn extends qn{constructor(t,e,s){super(),this.element=document.createElementNS("http://www.w3.org/2000/svg","circle"),this.cx(t).cy(e).r(s)}cx(t){return this.element.cx.baseVal.value=t,this}cy(t){return this.element.cy.baseVal.value=t,this}r(t){return this.element.r.baseVal.value=t,this}get R(){return this.element.r.baseVal.value}get Cx(){return this.element.cx.baseVal.value}get Cy(){return this.element.cy.baseVal.value}}const Zn=(t,e,s)=>new Yn(t,e,s);class Gn extends qn{constructor(t,e,s,r){super(),this.element=document.createElementNS("http://www.w3.org/2000/svg","ellipse"),this.cx(t).cy(e).rx(s).ry(r)}cx(t){return this.element.cx.baseVal.value=t,this}cy(t){return this.element.cy.baseVal.value=t,this}rx(t){return this.element.rx.baseVal.value=t,this}ry(t){return this.element.ry.baseVal.value=t,this}}const Qn=(t,e,s,r)=>new Gn(t,e,s,r);class Kn extends qn{constructor(t,e,s,r){super(),this.element=document.createElementNS("http://www.w3.org/2000/svg","line"),this.x1(t).y1(e).x2(s).y2(r).stroke("black")}x1(t){return this.element.x1.baseVal.value=t,this}y1(t){return this.element.y1.baseVal.value=t,this}x2(t){return this.element.x2.baseVal.value=t,this}y2(t){return this.element.y2.baseVal.value=t,this}}const Jn=(t,e,s,r)=>new Kn(t,e,s,r);class ti extends qn{constructor(t=[],e=[]){super(),this.X=t,this.Y=e,this.element=document.createElementNS("http://www.w3.org/2000/svg","polygon"),this.element.setAttribute("points","")}addPoint(t,e){let s=this.element.parentElement.createSVGPoint();return s.x=t,s.y=e,this.element.points.appendItem(s),this}addPoints(t,e){for(let s=0;s<t.length;s++){let r=this.element.parentElement.createSVGPoint();r.x=t[s],r.y=e[s],this.element.points.appendItem(r)}return this}}const ei=(t,e)=>new ti(t,e);class si extends qn{constructor(t="",e="100%",s="100%",r=0,n=0){super(),this.element=document.createElementNS("http://www.w3.org/2000/svg","image"),this.setSrc(t).width(e).height(s).x(r).y(n)}x(t){return this.element.x.baseVal.value=t,this}y(t){return this.element.y.baseVal.value=t,this}width(t){return this.element.setAttribute("width",t),this}height(t){return this.element.setAttribute("height",t),this}setSrc(t=""){return this.element.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t),this}}const ri=(t,e,s,r,n)=>new si(t,e,s,r,n);class ni extends qn{constructor(t,e,s){super(),this.element=document.createElementNS("http://www.w3.org/2000/svg","text"),this.setText(t),this.x(e).y(s)}x(t){return this.element.setAttribute("x",t),this}y(t){return this.element.setAttribute("y",t),this}setText(t=""){return this.element.textContent=t,this}}const ii=(t,e,s)=>new ni(t,e,s);class ai extends qn{constructor(...t){super(),this.items=[],this.element=document.createElementNS("http://www.w3.org/2000/svg","g"),this.add(...t)}add(...t){for(let e=0;e<t.length;e++)this.element.appendChild(t[e].element),this.items.push(t[e]);return 1===t.length?t[0]:t}remove(...t){for(let e=0;e<t.length;e++)this.element.removeChild(t[e].element),this.items=this.items.filter((e=>!t));return this}}const oi=(...t)=>new ai(...t);class hi extends Ge{constructor(t=360,e=300){super(),this.element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.setAttribute("width",t),this.setAttribute("height",e),this.style({border:"1px black solid"}),this.render()}view(t,e,s,r){let n=Math.abs(s-t),i=Math.abs(r-e);return this.element.setAttribute("viewBox",[t,e,n,i].join(" ")),this}add(...t){for(let e=0;e<t.length;e++)this.element.appendChild(t[e].element),this.items.push(t[e]);return this.maintain(),this}remove(...t){for(let e=0;e<t.length;e++)this.element.removeChild(t[e].element),this.items=this.items.filter((e=>!t));return this.maintain(),this}text(t,e,s){let r=ii(t,e,s);return this.element.appendChild(r.element),r.x(e-r.element.getComputedTextLength()/2),r}rect(t,e,s,r){let n=Xn(t,e,s,r);return this.add(n),n}line(t,e,s,r){let n=Jn(t,e,s,r);return this.element.appendChild(n.element),n}circle(t,e,s){let r=Zn(t,e,s);return this.element.appendChild(r.element),r}ellipse(t,e,s,r){let n=Qn(t,e,s,r);return this.element.appendChild(n.element),n}polygon(t,e){let s=ei(t,e);return this.element.appendChild(s.element),s.addPoints(t,e),s}image(t,e,s,r,n){let i=ri(t,e,s,r,n);return this.element.appendChild(i.element),i}mask(){}toString(){return(new XMLSerializer).serializeToString(this.element)}btoa(){return btoa(this.toString())}toImg(){return"data:image/svg+xml;base64,"+this.btoa()}toImg2(){return"data:image/svg+xml;charset=utf8,"+this.toString().replaceAll("<","%3C").replaceAll(">","%3E").replaceAll("#","%23").replaceAll('"',"'")}}const li=(t,e)=>new hi(t,e);class ci extends Ge{constructor(t,e){super(),this.element=document.createElement("canvas"),this.ctx=this.element.getContext("2d"),this.style({border:"1px red solid"}),this.transformMatrix=new at([[1,0,0],[0,1,0],[0,0,1]]),this.axisMatrix=new at([[-10,-10],[10,10]]),this.render(),setTimeout((()=>this.resize(t,e)),0),this.on("sizeupdated",(()=>this.adjust()))}get Width(){return this.element.width}get Height(){return this.element.height}get Xmin(){return this.axisMatrix[0][0]}get Ymin(){return this.axisMatrix[0][1]}get Xmax(){return this.axisMatrix[1][0]}get Ymax(){return this.axisMatrix[1][1]}get ImageData(){return this.ctx.getImageData(0,0,c.Width,c.Height)}draw(t=!0){return t?(this.clear(),this.items.forEach((t=>{t.parent=this,t.draw(this.ctx)}))):(this.items.at(-1).parent=this,this.items.at(-1).draw(this.ctx)),this.maintain(),this}applyTransformMatrix(){return this.ctx.setTransform(this.transformMatrix[0][0],this.transformMatrix[1][0],this.transformMatrix[0][1],this.transformMatrix[1][1],this.transformMatrix[0][2],this.transformMatrix[1][2]),this}resize(t,e){return this.size(t,e),this.lineWidth(),this.view(this.axisMatrix[0][0],this.axisMatrix[0][1],this.axisMatrix[1][0],this.axisMatrix[1][1]),this.emit("sizeupdated"),this}adjust(){return this.element.width=this.element.getBoundingClientRect().width,this.element.height=this.element.getBoundingClientRect().height,this.view(this.axisMatrix[0][0],this.axisMatrix[0][1],this.axisMatrix[1][0],this.axisMatrix[1][1]),this}view(t,e,s,r){return this.transformMatrix[0][0]=this.Width/(s-t),this.transformMatrix[1][1]=-this.Height/(r-e),this.transformMatrix[0][2]=this.Width/2,this.transformMatrix[1][2]=this.Height/2,this.axisMatrix=new at([[t,e],[s,r]]),this.applyTransformMatrix(),this.clear(),this.lineWidth(1),this.draw(),this}reset(){return this.ctx.setTransform(1,0,0,0,0,0),this}append(t){return this.items.push(t),this.draw(!1),this}background(t){this.ctx.fillStyle=t,this.ctx.setTransform(1,0,0,1,0,0),this.ctx.fillRect(0,0,this.Width,this.Height),this.applyTransformMatrix(),this.draw()}lineWidth(t){return this.ctx.lineWidth=t/this.transformMatrix[0][0],this}ImageData(t=0,e=0,s=this.Width,r=this.Height){return this.ctx.getImageData(t,e,s,r)}clear(){return this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.Width,this.Height),this.applyTransformMatrix(),this}clone(){console.log(this.Width);const t=new ci;return t.items=this.items,t.transformMatrix=this.transformMatrix,t.axisMatrix=this.axisMatrix,Object.assign(t.cache,{...this.cache}),this.size(element.style.width,element.style.width),this.applyTransformMatrix(),this.draw(),this.adjust(),t}toImage(){return this.img=document.createElement("img"),this.img.src=this.element.toDataURL("image/png"),this}toBlob(){this.element.toBlob((function(t){var e=document.createElement("img"),s=URL.createObjectURL(t);e.onload=function(){URL.revokeObjectURL(s)},e.src=s,console.log(e)}))}zoomIn(){}zoomOut(){}undo(t){}redo(t){}stream(){}}const ui=(t,e)=>new ci(t,e);class mi{constructor(t,e){this.parent=null,this.position={x:t,y:e},this.cache={interact:null,config:{draggable:!1,selected:!1,highlighted:!1,rendered:!1},style:{normal:{strokeEnabled:!0,fillEnabled:!1,strokeColor:"#111111",fillColor:"#777777"},highlighted:{strokeEnabled:!0,fillEnabled:!1,strokeColor:null,fillColor:null}}},this.history={position:[],styles:[]},this.render()}get px(){return(this.position.x??0)+(this.parent?.position?.x??0)}get py(){return(this.position.y??0)+(this.parent?.position?.y??0)}isIntersectedWith(){}isInStroke(t,e){let s;return this.parent&&(this.parent.ctx.setTransform(1,0,0,1,0,0),s=this.parent.ctx.isPointInStroke(this.path,t,e),this.parent.applyTransformMatrix()),s}isInPath(t,e){let s;return this.parent&&(this.parent.ctx.setTransform(1,0,0,1,0,0),s=this.parent.ctx.isPointInPath(this.path,t,e),this.parent.applyTransformMatrix()),s}posX(t){return this.position.x=t,this.parent&&this.parent.draw(),this}posY(t){return this.position.y=t,this.parent&&this.parent.draw(),this}color({stroke:t=this.cache.style.normal.strokeColor,fill:e=this.cache.style.normal.fillColor}={stroke:t,fill:e}){return this.cache.style.normal.strokeColor=t,this.cache.style.normal.fillColor=e,this.parent&&this.parent.draw(),this}translate(t=0,e=0){this.position.x+=t,this.position.y+=e,this.parent&&this.parent.draw()}applyNormalStyle(t){return t.strokeStyle=this.cache.style.normal.strokeColor,t.fillStyle=this.cache.style.normal.fillColor,this}applyHighlightedStyle(t){return t.strokeStyle=this.cache.style.highlighted.strokeColor,t.fillStyle=this.cache.style.highlighted.fillColor,this}stroke(t=this.cache.style.normal.strokeColor,e=!0){return this.cache.style.normal.strokeEnabled=e,this.cache.style.normal.strokeColor=t,this.parent&&this.parent.draw(),this}fill(t=this.cache.style.normal.fillColor,e=!0){return this.cache.style.normal.fillEnabled=e,this.cache.style.normal.filleColor=t,this.parent&&this.parent.draw(),this}render(t=!0){return this.cache.config.rendered=t,this}}class pi extends mi{constructor(t,e,s,r){super(t,e),this.r=s,this.angle=r,this.path=null}draw(t){if(this.cache.config.rendered){t.save(),this.applyNormalStyle(t),t.beginPath(),this.path=new Path2D,this.path.arc(this.px,this.py,this.r,0,this.angle);const{strokeEnabled:e,fillEnabled:s}=this.cache.style.normal;e&&t.stroke(this.path),s&&t.fill(this.path),t.closePath(),t.restore()}return this}radius(t){return this.r=t,this.parent&&this.parent.draw(),this}}const di=(t,e,s,r)=>new pi(t,e,s,r),fi=(t,e,s)=>new pi(t,e,s,2*Math.PI);class gi extends mi{constructor(t,e){super(),this.pointsMatrix=null,this.path=new Path2D,this.fromXY(t,e)}get points(){return this.pointsMatrix.T.arr}draw(t){if(this.cache.config.rendered){t.save(),this.applyNormalStyle(t),t.beginPath(),this.path.moveTo(this.points[1][0]+this._x,this.points[1][1]+this._y);for(let t=1;t<this.points.length;t++)this.path.lineTo(this.points[t][0]+this._x,this.points[t][1]+this._y);t.stroke(this.path),t.restore()}return this}fromXY(t,e){return this.pointsMatrix=ot([t,e]),this}push(t,e){return this.pointsMatrix.hstack(ot([t,e])),this.parent&&this.parent.draw(),this}isIn(t,e){let s;return this.parent&&(this.parent.ctx.setTransform(1,0,0,1,0,0),s=this.parent.ctx.isPointInPath(this.path,t,e),this.parent.applyTransformMatrix()),s}}const bi=(t=[],e=[])=>new gi(t,e);class yi extends mi{constructor(t,e,s,r){super(),this.x0=t,this.x1=s,this.y0=e,this.y1=r,delete this.fill}draw(t){return this.cache.config.rendered&&(t.save(),this.applyNormalStyle(t),t.beginPath(),t.moveTo(this.x0+this._x,this.y0+this._y_),t.lineTo(this.x1+this._x,this.y1+this._y),t.stroke(),this.cache.style.normal.strokeEnabled&&t.stroke(),t.restore()),this}}const xi=(t,e,s,r)=>new yi(t,e,s,r);class wi extends mi{constructor(t,e,s,r){super(t,e),this.w=s,this.h=r,this.path=new Path2D}draw(t){if(this.cache.config.rendered){t.save(),this.applyNormalStyle(t),t.beginPath(),this.path.rect(this.px,this.py,this.w,this.h);const{strokeEnabled:e,fillEnabled:s}=this.cache.style.normal;e&&t.stroke(this.path),s&&t.fill(this.path),t.closePath(),t.restore()}return this}width(t){return this.w=t,this.parent&&this.parent.draw(),this}height(t){return this.h=t,this.parent&&this.parent.draw(),this}}const vi=(t,e,s,r)=>new wi(t,e,s,r),ki={Svg:li,ZikoUISvg:hi,svgCircle:Zn,svgEllipse:Qn,svgImage:ri,svgLine:Jn,svgPolygon:ei,svgRect:Xn,svgText:ii,svgGroupe:oi,Canvas:ui,canvasArc:di,canvasCircle:fi,canvasPoints:bi,canvasLine:xi,canvasRect:vi,ExtractAll:function(){const t=Object.keys(this);for(let e=0;e<t.length;e++){const s=t[e];"ExtractAll"!==s&&"RemoveAll"!==s&&(globalThis[s]=this[s])}return this},RemoveAll:function(){const t=Object.keys(this);for(let e=0;e<t.length;e++){const s=t[e];"RemoveAll"!==s&&delete globalThis[s]}return this}};class Ei{#c;constructor(){this.#c=function(t){try{let e=new Function("return "+t.data.fun)()();postMessage({result:e})}catch(t){postMessage({error:t.message})}finally{t.data.close&&self.close()}}.toString(),this.blob=new Blob(["this.onmessage = "+this.#c],{type:"text/javascript"}),this.worker=new Worker(window.URL.createObjectURL(this.blob))}call(t,e,s=!0){return this.worker.postMessage({fun:t.toString(),close:s}),this.worker.onmessage=function(t){t.data.error?console.error(t.data.error):e(t.data.result)},this}}const Ai=(t,e,s)=>{const r=new Ei;return t&&r.call(t,e,s),r};class Mi{constructor(t,e){this.root_UI=t,this.routes=new Map([[404,Je("Error 404")],...Object.entries(e)]),this.patterns=new Map,this.maintain(),window.onpopstate=this.render(location.pathname)}get(t,e){return t instanceof RegExp?this.patterns.set(t,e):this.routes.set(t,e),this.maintain(),this}maintain(){return this.root_UI.append(...this.routes.values()),[...this.routes.values()].map((t=>t.render(!1))),this.render(location.pathname),this}render(t){if(this.routes.get(t))this.routes.get(t).render(!0);else{const e=[...this.patterns.keys()].find((e=>e.test(t)));e?this.patterns.get(e)(t):this.routes.get(404).render(!0)}return window.history.pushState({},"",t),this}}const Ci=(t,e,s)=>new Mi(t,e,s);class Ti{constructor(t){this.app=t,this.meta={},this.#u("generator","zikojs")}#u(t,e){const s=document.querySelector(`meta[name=${t}]`);return this.meta=s||document.createElement("meta"),this.meta.setAttribute("name",t),this.meta.setAttribute("content",e),s||this.app.head.append(this.meta),this}charset(t="utf-8"){const e=document.querySelector("meta[charset]");return this.meta=e||document.createElement("meta"),this.meta.setAttribute("charset",t),e||this.app.head.append(this.meta),this}description(t){return this.#u("description",t),this}viewport(t="width=device-width, initial-scale=1.0"){return this.#u("viewport",t),this}keywords(...t){return t.push("zikojs"),t=[...new Set(t)].join(", "),this.#u("keywords",t),this}author(t="",e=""){const s=[t,e].join(", ");return this.#u("author",s),this}}class _i extends wr{constructor(){super("main"),this.root=document.documentElement,this.head=null,this.#r(),this.seo=new Ti(this),Object.assign(this.cache,{theme:null,isRoot:!0}),this.render()}#r(){this.root.setAttribute("data-engine","zikojs");const t=this.root.getElementsByTagName("head")[0];this.head=t||(this.head=document.createElement("head")),t||this.root.insertBefore(this.head,document.body);const e=this.head.getElementsByTagName("title")[0];this.Title=e||document.createElement("title"),e||this.head.append(this.Title)}title(t=this.title.textContent){return this.Title.textContent=t,this}prefetch(){}description(){}}const Ii=(...t)=>(new _i).append(...t),Oi=()=>document.documentElement.setAttribute("data-engine","zikojs");globalThis?.document&&(document.addEventListener("DOMContentLoaded",Oi),document.removeEventListener("DOMContentLoaded",Oi));const Si={App:Ii,Math:Kt,UI:sn,Time:gn,Graphics:ki,Events:Xe,Data:Hn,Multi:Ai,SPA:Ci,ALL_UI_ELEMENTS:Qe};globalThis.__Ziko__=Si,t.Accordion=Sr,t.App=Ii,t.Article=zr,t.Aside=qr,t.Base=X,t.Canvas=ui,t.Carousel=Mr,t.CodeNote=Tr,t.Combinaison=Z,t.Complex=s,t.Data=Hn,t.E=At,t.EPSILON=Mt,t.Ease=an,t.Events=Xe,t.ExtractAll=function(){return sn.ExtractAll(),Kt.ExtractAll(),gn.ExtractAll(),Xe.ExtractAll(),ki.ExtractAll(),Hn.ExtractAll(),this},t.Fixed=p,t.Flex=vr,t.Footer=$r,t.Graphics=ki,t.Grid=Er,t.Header=Ur,t.LinearSystem=ut,t.Logic=W,t.Main=Br,t.Math=Kt,t.Matrix=at,t.Multi=Ai,t.Nav=Hr,t.PI=Et,t.Permutation=Y,t.PowerSet=G,t.Random=J,t.RemoveAll=function(){sn.RemoveAll(),Kt.RemoveAll(),gn.ExtractAll(),Xe.RemoveAll(),ki.RemoveAll(),Hn.ExtractAll()},t.SPA=Ci,t.Section=Nr,t.Signal=Qt,t.Svg=li,t.Table=en,t.Tabs=Ir,t.Time=gn,t.UI=sn,t.Utils=Ht,t.Ziko=Si,t.ZikoHtml=ys,t.ZikoUIAudio=cr,t.ZikoUICanvas=ci,t.ZikoUIElement=Ge,t.ZikoUIFigure=ur,t.ZikoUIHtmlTag=ls,t.ZikoUIImage=lr,t.ZikoUISection=Rr,t.ZikoUISvg=hi,t.ZikoUIVideo=ar,t.__init__=Oi,t.abs=d,t.acos=T,t.acosh=R,t.acot=O,t.add=yt,t.animation=fn,t.arange=jt,t.asin=_,t.asinh=P,t.atan=I,t.atan2=B,t.atanh=F,t.audio=pr,t.bessel=(t,e)=>{if("number"==typeof t){if("number"==typeof t)return u(t,e);console.warn("Not supported yet")}else if(t instanceof Array){if("number"==typeof e)return mt((t=>u(t,e)),...t);if(e instanceof Array){const s=[];for(let r=0;r<t.length;r++)s.push(mt((e=>u(t[r],e)),...e));return s}}},t.beta=(t,e)=>{if("number"==typeof t){if("number"==typeof t)return m(t,e);console.warn("Not supported yet")}else if(t instanceof Array){if("number"==typeof e)return mt((t=>m(t,e)),...t);if(e instanceof Array){const s=[];for(let r=0;r<t.length;r++)s.push(mt((e=>m(t[r],e)),...e));return s}}},t.br=ps,t.brs=fs,t.btn=Cs,t.canvasArc=di,t.canvasCircle=fi,t.canvasLine=xi,t.canvasPoints=bi,t.canvasRect=vi,t.cartesianProduct=Bt,t.ceil=L,t.checkbox=sr,t.choleskyDecomposition=it,t.clamp=Vt,t.complex=r,t.cos=w,t.cosh=S,t.cot=C,t.coth=D,t.csc=M,t.csv2arr=kn,t.csv2json=Mn,t.csv2matrix=En,t.csv2object=An,t.csv2sql=Cn,t.datalist=qs,t.debounce=on,t.deg2rad=Ft,t.div=vt,t.e=y,t.fact=U,t.figure=dr,t.floor=N,t.gamma=(...t)=>mt(l,...t),t.geomspace=Pt,t.h1=rs,t.h2=ns,t.h3=is,t.h4=as,t.h5=os,t.h6=hs,t.hr=ds,t.hrs=gs,t.hypot=q,t.image=mr,t.inRange=Nt,t.input=Hs,t.inputCamera=hr,t.inputColor=Ks,t.inputDate=tr,t.inputDateTime=er,t.inputEmail=Qs,t.inputImage=Zs,t.inputNumber=Xs,t.inputPassword=Gs,t.inputTime=Js,t.isApproximatlyEqual=zt,t.json2arr=In,t.json2csv=On,t.json2csvFile=Sn,t.json2xml=Pn,t.json2xmlFile=Fn,t.json2yml=Dn,t.json2ymlFile=Rn,t.lerp=Ot,t.li=t=>new xs(t),t.link=bs,t.linspace=Dt,t.ln=x,t.logspace=Rt,t.loop=nn,t.luDecomposition=tt,t.map=St,t.mapfun=mt,t.markdown2html=vn,t.matrix=ot,t.matrix2=ht,t.matrix3=lt,t.matrix4=ct,t.max=o,t.min=a,t.modulo=kt,t.mul=wt,t.norm=It,t.nums=_t,t.ol=Es,t.ones=Tt,t.p=es,t.pgcd=Ut,t.pow=g,t.ppcm=$t,t.prod=i,t.qrDecomposition=nt,t.rad2deg=Lt,t.radio=rr,t.round=z,t.search=Ys,t.sec=E,t.select=ir,t.sig=H,t.sign=$,t.sin=v,t.sinc=A,t.sinh=V,t.slider=Ws,t.sqrt=f,t.sqrtn=b,t.sub=xt,t.subset=Q,t.sum=n,t.svg2ascii=Nn,t.svg2img=Bn,t.svg2imgUrl=zn,t.svg2str=Ln,t.svgCircle=Zn,t.svgEllipse=Qn,t.svgGroupe=oi,t.svgImage=ri,t.svgLine=Jn,t.svgPolygon=ei,t.svgRect=Xn,t.svgText=ii,t.tan=k,t.tanh=j,t.text=Je,t.textarea=Is,t.throttle=hn,t.timeTaken=pn,t.time_memory_Taken=ln,t.ul=As,t.video=fr,t.wait=mn,t.waitForUIElm=cn,t.waitForUIElmSync=un,t.zeros=Ct}));
